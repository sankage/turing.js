<html>
	<head>
		<title>Turing</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<style>body {
    margin: 0;
    padding: 0;
    font: 14px/1.5 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
    color: #252519;
}
a {
    color: #252519;
}
a:hover {
    text-decoration: underline;
    color: #19469D;
}
p {
    margin: 12px 0;
}
h1, h2, h3 {
    margin: 0;
    padding: 0;
}
table#source {
    width: 100%;
    border-collapse: collapse;
}
table#source td:first-child {
    padding: 30px 40px 30px 40px;
    vertical-align: top;
}
table#source td:first-child,
table#source td:first-child pre {
    width: 450px;
}
table#source td:last-child {
    padding: 30px 0 30px 40px;
    border-left: 1px solid #E5E5EE;
    background: #F5F5FF;
}
table#source tr {
    border-bottom: 1px solid #E5E5EE;
}
table#source tr.filename {
    padding-top: 40px;
    border-top: 1px solid #E5E5EE;
}
table#source tr.filename td:first-child {
    text-transform: capitalize;
}
table#source tr.filename td:last-child {
    font-size: 12px;
}
table#source tr.filename h2 {
    margin: 0;
    padding: 0;
    cursor: pointer;
}
table#source tr.code h1,
table#source tr.code h2,
table#source tr.code h3 {
    margin-top: 30px;
    font-family: "Lucida Grande", "Helvetica Nueue", Arial, sans-serif;
    font-size: 18px;
}
table#source tr.code h2 {
    font-size: 16px;
}
table#source tr.code h3 {
    font-size: 14px;
}
table#source tr.code ul {
    margin: 15px 0 15px 35px;
    padding: 0;
}
table#source tr.code ul li {
    margin: 0;
    padding: 1px 0;
}
table#source tr.code ul li p {
    margin: 0;
    padding: 0;
}
table#source tr.code td:first-child pre {
    padding: 20px;
}
#ribbon {
    position: fixed;
    top: 0;
    right: 0;
}
code .string { color: #219161; }
code .regexp { color: #219161; }
code .keyword { color: #954121; }
code .number { color: #19469D; }
code .comment { color: #bbb; }
code .this { color: #19469D; }</style>
		<script>
			$(function(){
				$('tr.code').hide();
				$('tr.filename').toggle(function(){
					$(this).nextUntil('.filename').fadeIn();
				}, function(){
					$(this).nextUntil('.filename').fadeOut();
				});
			});
		</script>
	</head>
	<body>
<table id="source"><tbody><tr><td><h1>Turing</h1><p>Turing is a JavaScript framework.  The source is available from GitHub at <a href="https://github.com/alexyoung/turing.js/">alexyoung/turing.js</a>.</p>

<p>The DOM, Events, and Anim modules are chainable, like this:</p>

<pre><code>    turing('p')
      .fadeIn(2000)
      .animate(1000, { color: '#ff0000' })
      .click(function() { alert('clicked'); });</code></pre>

<p>This is the easiest way to use Turing.</p>

<p>The DOM results can be manipulated with the <code>turing.enumerable</code> module methods:</p>

<pre><code>    turing('p')
      .map(function(element) { return element.innerHTML; })
      .values();</code></pre>

<p>The <code>values</code> method returns the results of the last operation, in this case each paragraph's <code>innerHTML</code>.</p>

<p>Arrays or objects can be iterated using <code>turing()</code>, too:</p>

<pre><code>    turing([1, 2, 3])
      .map(function(n) { return n + 1; })
      .values();

    // =&gt; [2, 3, 4]</code></pre></td><td></td></tr><tr class="filename"><td><h2 id="turing.anim.js"><a href="#">turing.anim</a></h2></td><td>turing.anim.js</td></tr><tr class="code">
<td class="docs">
<p>The main animation method is <code>turing.anim.animate</code>.  The animate method animates CSS properties.</p>

<p>There are also animation helper methods, like <code>turing.anim.fadeIn</code> and <code>turing.anim.move</code>.  </p>

<h2>Animation Examples</h2>

<p>Turn a paragraph red:</p>

<pre><code> turing.anim.animate($t('p')[0], 2000, {
   'color': '#ff0000'
 });</code></pre>

<p>Move a paragraph:</p>

<pre><code> turing.anim.animate($t('p')[0], 2000, {
   'marginLeft': '400px'
 });</code></pre>

<p>It's possible to chain animation module calls with <code>turing.anim.chain</code>, but it's easier to use the DOM chained methods:</p>

<pre><code> turing('p').fadeIn(2000).animate(1000, {
   'marginLeft': '200px'
 })</code></pre>

<h2>Or</h2>

<pre><code> $t('p').fadeIn(2000).animate(1000, {
   'marginLeft': '200px'
 })</code></pre>

<p> </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>() {
  <span class="keyword">var</span> <span class="variable">anim</span> = {},
      <span class="variable">easing</span> = {},
      <span class="class">Chainer</span>,
      <span class="variable">opacityType</span>,
      <span class="class">CSSTransitions</span> = {};

  <span class="comment">// These CSS related functions should be moved into turing.css</span>
  <span class="keyword">function</span> <span class="variable">camelize</span>(<span class="variable">property</span>) {
    <span class="keyword">return</span> <span class="variable">property</span>.<span class="variable">replace</span>(<span class="regexp">/-+(.)?/g</span>, <span class="keyword">function</span>(<span class="variable">match</span>, <span class="variable">chr</span>) {
      <span class="keyword">return</span> <span class="variable">chr</span> ? <span class="variable">chr</span>.<span class="variable">toUpperCase</span>() : <span class="string">''</span>;
    });
  }

  <span class="keyword">function</span> <span class="variable">getOpacityType</span>() {
    <span class="keyword">return</span> (<span class="keyword">typeof</span> <span class="variable">document</span>.<span class="variable">body</span>.<span class="variable">style</span>.<span class="variable">opacity</span> !== <span class="string">'undefined'</span>) ? <span class="string">'opacity'</span> : <span class="string">'filter'</span>;
  }

  <span class="keyword">function</span> <span class="class">Colour</span>(<span class="variable">value</span>) {
    <span class="this">this</span>.<span class="variable">r</span> = <span class="number integer">0</span>;
    <span class="this">this</span>.<span class="variable">g</span> = <span class="number integer">0</span>;
    <span class="this">this</span>.<span class="variable">b</span> = <span class="number integer">0</span>;
    <span class="this">this</span>.<span class="variable">value</span> = <span class="this">this</span>.<span class="variable">normalise</span>(<span class="variable">value</span>);
    <span class="this">this</span>.<span class="variable">parse</span>();
  }

  <span class="comment">// Based on: http://www.phpied.com/rgb-color-parser-in-javascript/</span>
  <span class="class">Colour</span>.<span class="variable">matchers</span> = [
    {
      <span class="variable">re</span>: <span class="regexp">/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/</span>,
      <span class="variable">example</span>: [<span class="string">'rgb(123, 234, 45)'</span>, <span class="string">'rgb(255,234,245)'</span>],
      <span class="variable">process</span>: <span class="keyword">function</span> (<span class="variable">bits</span>){
        <span class="keyword">return</span> [
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">1</span>]),
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">2</span>]),
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">3</span>])
        ];
      }
    },
    {
      <span class="variable">re</span>: <span class="regexp">/^(\w{2})(\w{2})(\w{2})$/</span>,
      <span class="variable">example</span>: [<span class="string">'#00ff00'</span>, <span class="string">'336699'</span>],
      <span class="variable">process</span>: <span class="keyword">function</span> (<span class="variable">bits</span>){
        <span class="keyword">return</span> [
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">1</span>], <span class="number integer">16</span>),
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">2</span>], <span class="number integer">16</span>),
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">3</span>], <span class="number integer">16</span>)
        ];
      }
    },
    {
      <span class="variable">re</span>: <span class="regexp">/^(\w{1})(\w{1})(\w{1})$/</span>,
      <span class="variable">example</span>: [<span class="string">'#fb0'</span>, <span class="string">'f0f'</span>],
      <span class="variable">process</span>: <span class="keyword">function</span> (<span class="variable">bits</span>) {
        <span class="keyword">return</span> [
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">1</span>] + <span class="variable">bits</span>[<span class="number integer">1</span>], <span class="number integer">16</span>),
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">2</span>] + <span class="variable">bits</span>[<span class="number integer">2</span>], <span class="number integer">16</span>),
          <span class="variable">parseInt</span>(<span class="variable">bits</span>[<span class="number integer">3</span>] + <span class="variable">bits</span>[<span class="number integer">3</span>], <span class="number integer">16</span>)
        ];
      }
    }
  ];

  <span class="class">Colour</span>.<span class="variable">prototype</span>.<span class="variable">normalise</span> = <span class="keyword">function</span>(<span class="variable">value</span>) {
    <span class="variable">value</span>.<span class="variable">replace</span>(<span class="regexp">/ /g</span>, <span class="string">''</span>);
    <span class="keyword">if</span> (<span class="variable">value</span>.<span class="variable">charAt</span>(<span class="number integer">0</span>) == <span class="string">'#'</span>) {
      <span class="variable">value</span> = <span class="variable">value</span>.<span class="variable">substr</span>(<span class="number integer">1</span>, <span class="number integer">6</span>);
    }
    <span class="keyword">return</span> <span class="variable">value</span>;
  }

  <span class="class">Colour</span>.<span class="variable">prototype</span>.<span class="variable">parse</span> = <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">channels</span> = [], <span class="variable">i</span>;
    <span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="class">Colour</span>.<span class="variable">matchers</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
      <span class="variable">channels</span> = <span class="this">this</span>.<span class="variable">value</span>.<span class="variable">match</span>(<span class="class">Colour</span>.<span class="variable">matchers</span>[<span class="variable">i</span>].<span class="variable">re</span>);
      <span class="keyword">if</span> (<span class="variable">channels</span>) {
        <span class="variable">channels</span> = <span class="class">Colour</span>.<span class="variable">matchers</span>[<span class="variable">i</span>].<span class="variable">process</span>(<span class="variable">channels</span>);
        <span class="this">this</span>.<span class="variable">r</span> = <span class="variable">channels</span>[<span class="number integer">0</span>];
        <span class="this">this</span>.<span class="variable">g</span> = <span class="variable">channels</span>[<span class="number integer">1</span>];
        <span class="this">this</span>.<span class="variable">b</span> = <span class="variable">channels</span>[<span class="number integer">2</span>];
        <span class="keyword">break</span>;
      }
    }
    <span class="this">this</span>.<span class="variable">validate</span>();
  }

  <span class="class">Colour</span>.<span class="variable">prototype</span>.<span class="variable">validate</span> = <span class="keyword">function</span>() {
    <span class="this">this</span>.<span class="variable">r</span> = (<span class="this">this</span>.<span class="variable">r</span> &<span class="variable">lt</span>; <span class="number integer">0</span> || <span class="variable">isNaN</span>(<span class="this">this</span>.<span class="variable">r</span>)) ? <span class="number integer">0</span> : ((<span class="this">this</span>.<span class="variable">r</span> &<span class="variable">gt</span>; <span class="number integer">255</span>) ? <span class="number integer">255</span> : <span class="this">this</span>.<span class="variable">r</span>);
    <span class="this">this</span>.<span class="variable">g</span> = (<span class="this">this</span>.<span class="variable">g</span> &<span class="variable">lt</span>; <span class="number integer">0</span> || <span class="variable">isNaN</span>(<span class="this">this</span>.<span class="variable">g</span>)) ? <span class="number integer">0</span> : ((<span class="this">this</span>.<span class="variable">g</span> &<span class="variable">gt</span>; <span class="number integer">255</span>) ? <span class="number integer">255</span> : <span class="this">this</span>.<span class="variable">g</span>);
    <span class="this">this</span>.<span class="variable">b</span> = (<span class="this">this</span>.<span class="variable">b</span> &<span class="variable">lt</span>; <span class="number integer">0</span> || <span class="variable">isNaN</span>(<span class="this">this</span>.<span class="variable">b</span>)) ? <span class="number integer">0</span> : ((<span class="this">this</span>.<span class="variable">b</span> &<span class="variable">gt</span>; <span class="number integer">255</span>) ? <span class="number integer">255</span> : <span class="this">this</span>.<span class="variable">b</span>);
  }

  <span class="class">Colour</span>.<span class="variable">prototype</span>.<span class="variable">sum</span> = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">r</span> + <span class="this">this</span>.<span class="variable">g</span> + <span class="this">this</span>.<span class="variable">b</span>;
  }

  <span class="class">Colour</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="string">'rgb('</span> + <span class="this">this</span>.<span class="variable">r</span> + <span class="string">', '</span> + <span class="this">this</span>.<span class="variable">g</span> + <span class="string">', '</span> + <span class="this">this</span>.<span class="variable">b</span> + <span class="string">')'</span>;
  }

  <span class="keyword">function</span> <span class="variable">isColour</span>(<span class="variable">value</span>) {
    <span class="keyword">return</span> <span class="keyword">typeof</span> <span class="variable">value</span> === <span class="string">'string'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">value</span>.<span class="variable">match</span>(<span class="regexp">/(#[a-f|A-F|0-9]|rgb)/</span>);
  }
  
  <span class="keyword">function</span> <span class="variable">parseColour</span>(<span class="variable">value</span>) {
    <span class="keyword">return</span> { <span class="variable">value</span>: <span class="keyword">new</span> <span class="class">Colour</span>(<span class="variable">value</span>), <span class="variable">units</span>: <span class="string">''</span>, <span class="variable">transform</span>: <span class="variable">colourTransform</span> };
  }

  <span class="keyword">function</span> <span class="variable">numericalTransform</span>(<span class="variable">parsedValue</span>, <span class="variable">position</span>, <span class="variable">easingFunction</span>) {
    <span class="keyword">return</span> (<span class="variable">easingFunction</span>(<span class="variable">position</span>) * <span class="variable">parsedValue</span>.<span class="variable">value</span>);
  }

  <span class="keyword">function</span> <span class="variable">colourTransform</span>(<span class="variable">v</span>, <span class="variable">position</span>, <span class="variable">easingFunction</span>) {
    <span class="keyword">var</span> <span class="variable">colours</span> = [];
    <span class="variable">colours</span>[<span class="number integer">0</span>] = <span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">v</span>.<span class="variable">base</span>.<span class="variable">r</span> + (<span class="variable">v</span>.<span class="variable">direction</span>[<span class="number integer">0</span>] * (<span class="class">Math</span>.<span class="variable">abs</span>(<span class="variable">v</span>.<span class="variable">base</span>.<span class="variable">r</span> - <span class="variable">v</span>.<span class="variable">value</span>.<span class="variable">r</span>) * <span class="variable">easingFunction</span>(<span class="variable">position</span>))));
    <span class="variable">colours</span>[<span class="number integer">1</span>] = <span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">v</span>.<span class="variable">base</span>.<span class="variable">g</span> + (<span class="variable">v</span>.<span class="variable">direction</span>[<span class="number integer">1</span>] * (<span class="class">Math</span>.<span class="variable">abs</span>(<span class="variable">v</span>.<span class="variable">base</span>.<span class="variable">g</span> - <span class="variable">v</span>.<span class="variable">value</span>.<span class="variable">g</span>) * <span class="variable">easingFunction</span>(<span class="variable">position</span>))));
    <span class="variable">colours</span>[<span class="number integer">2</span>] = <span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">v</span>.<span class="variable">base</span>.<span class="variable">b</span> + (<span class="variable">v</span>.<span class="variable">direction</span>[<span class="number integer">2</span>] * (<span class="class">Math</span>.<span class="variable">abs</span>(<span class="variable">v</span>.<span class="variable">base</span>.<span class="variable">b</span> - <span class="variable">v</span>.<span class="variable">value</span>.<span class="variable">b</span>) * <span class="variable">easingFunction</span>(<span class="variable">position</span>))));
    <span class="keyword">return</span> <span class="string">'rgb('</span> + <span class="variable">colours</span>.<span class="variable">join</span>(<span class="string">', '</span>) + <span class="string">')'</span>;
  }

  <span class="keyword">function</span> <span class="variable">parseNumericalValue</span>(<span class="variable">value</span>) {
    <span class="keyword">var</span> <span class="variable">n</span> = (<span class="keyword">typeof</span> <span class="variable">value</span> === <span class="string">'string'</span>) ? <span class="variable">parseFloat</span>(<span class="variable">value</span>) : <span class="variable">value</span>,
        <span class="variable">units</span> = (<span class="keyword">typeof</span> <span class="variable">value</span> === <span class="string">'string'</span>) ? <span class="variable">value</span>.<span class="variable">replace</span>(<span class="variable">n</span>, <span class="string">''</span>) : <span class="string">''</span>;
    <span class="keyword">return</span> { <span class="variable">value</span>: <span class="variable">n</span>, <span class="variable">units</span>: <span class="variable">units</span>, <span class="variable">transform</span>: <span class="variable">numericalTransform</span> };
  }

  <span class="keyword">function</span> <span class="variable">parseCSSValue</span>(<span class="variable">value</span>, <span class="variable">element</span>, <span class="variable">property</span>) {
    <span class="keyword">if</span> (<span class="variable">isColour</span>(<span class="variable">value</span>)) {
      <span class="keyword">var</span> <span class="variable">colour</span> = <span class="variable">parseColour</span>(<span class="variable">value</span>), <span class="variable">i</span>;
      <span class="variable">colour</span>.<span class="variable">base</span> = <span class="keyword">new</span> <span class="class">Colour</span>(<span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">property</span>]);
      <span class="variable">colour</span>.<span class="variable">direction</span> = [<span class="variable">colour</span>.<span class="variable">base</span>.<span class="variable">r</span> &<span class="variable">lt</span>; <span class="variable">colour</span>.<span class="variable">value</span>.<span class="variable">r</span> ? <span class="number integer">1</span> : -<span class="number integer">1</span>,
                          <span class="variable">colour</span>.<span class="variable">base</span>.<span class="variable">g</span> &<span class="variable">lt</span>; <span class="variable">colour</span>.<span class="variable">value</span>.<span class="variable">g</span> ? <span class="number integer">1</span> : -<span class="number integer">1</span>,
                          <span class="variable">colour</span>.<span class="variable">base</span>.<span class="variable">b</span> &<span class="variable">lt</span>; <span class="variable">colour</span>.<span class="variable">value</span>.<span class="variable">b</span> ? <span class="number integer">1</span> : -<span class="number integer">1</span>];
      <span class="keyword">return</span> <span class="variable">colour</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">value</span> !== <span class="string">'object'</span>) {
      <span class="keyword">return</span> <span class="variable">parseNumericalValue</span>(<span class="variable">value</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="variable">value</span>;
    }
  }

  <span class="keyword">function</span> <span class="variable">setCSSProperty</span>(<span class="variable">element</span>, <span class="variable">property</span>, <span class="variable">value</span>) {
    <span class="keyword">if</span> (<span class="variable">property</span> == <span class="string">'opacity'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">opacityType</span> == <span class="string">'filter'</span>) {
      <span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">opacityType</span>] = <span class="string">'alpha(opacity='</span> + <span class="class">Math</span>.<span class="variable">round</span>(<span class="variable">value</span> * <span class="number integer">100</span>) + <span class="string">')'</span>;
      <span class="keyword">return</span> <span class="variable">element</span>;
    }
    <span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">property</span>] = <span class="variable">value</span>;
    <span class="keyword">return</span> <span class="variable">element</span>;
  }

  <span class="variable">easing</span>.<span class="variable">linear</span> = <span class="keyword">function</span>(<span class="variable">position</span>) {
    <span class="keyword">return</span> <span class="variable">position</span>;
  };

  <span class="variable">easing</span>.<span class="variable">sine</span> = <span class="keyword">function</span>(<span class="variable">position</span>) {
    <span class="keyword">return</span> (-<span class="class">Math</span>.<span class="variable">cos</span>(<span class="variable">position</span> * <span class="class">Math</span>.<span class="class">PI</span>) / <span class="number integer">2</span>) + <span class="number float">0.5</span>;
  };

  <span class="variable">easing</span>.<span class="variable">reverse</span> = <span class="keyword">function</span>(<span class="variable">position</span>) {
    <span class="keyword">return</span> <span class="number float">1.0</span> - <span class="variable">position</span>;
  };

  <span class="variable">easing</span>.<span class="variable">spring</span> = <span class="keyword">function</span>(<span class="variable">position</span>) {
    <span class="keyword">return</span> <span class="number integer">1</span> - (<span class="class">Math</span>.<span class="variable">cos</span>(<span class="variable">position</span> * <span class="class">Math</span>.<span class="class">PI</span> * <span class="number integer">4</span>) * <span class="class">Math</span>.<span class="variable">exp</span>(-<span class="variable">position</span> * <span class="number integer">6</span>))
  };

  <span class="variable">easing</span>.<span class="variable">bounce</span> = <span class="keyword">function</span>(<span class="variable">position</span>) {
    <span class="keyword">if</span> (<span class="variable">position</span> &<span class="variable">lt</span>; (<span class="number integer">1</span> / <span class="number float">2.75</span>)) {
      <span class="keyword">return</span> <span class="number float">7.6</span> * <span class="variable">position</span> * <span class="variable">position</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">position</span> &<span class="variable">lt</span>; (<span class="number integer">2</span> /<span class="number float">2.75</span>)) {
      <span class="keyword">return</span> <span class="number float">7.6</span> * (<span class="variable">position</span> -= (<span class="number float">1.5</span> / <span class="number float">2.75</span>)) * <span class="variable">position</span> + <span class="number float">0.74</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">position</span> &<span class="variable">lt</span>; (<span class="number float">2.5</span> / <span class="number float">2.75</span>)) {
      <span class="keyword">return</span> <span class="number float">7.6</span> * (<span class="variable">position</span> -= (<span class="number float">2.25</span> / <span class="number float">2.75</span>)) * <span class="variable">position</span> + <span class="number float">0.91</span>;
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="number float">7.6</span> * (<span class="variable">position</span> -= (<span class="number float">2.625</span> / <span class="number float">2.75</span>)) * <span class="variable">position</span> + <span class="number float">0.98</span>;
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Animates an element using CSS properties.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>Number</em>  duration Duration in milliseconds</p></li><li><p><strong>param</strong>: <em>Object</em>  properties CSS properties to animate, for example: <code>{ width: '20px' }</code></p></li><li><p><strong>param</strong>: <em>Object</em>  options Currently accepts an easing function or built-in easing method name (linear, sine, reverse, spring, bounce)</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">animate</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">properties</span>, <span class="variable">options</span>) {
    <span class="keyword">var</span> <span class="variable">duration</span> = <span class="variable">duration</span>,
        <span class="variable">start</span> = (<span class="keyword">new</span> <span class="class">Date</span>).<span class="variable">valueOf</span>(),
        <span class="variable">finish</span> = <span class="variable">start</span> + <span class="variable">duration</span>,
        <span class="variable">easingFunction</span> = <span class="variable">easing</span>.<span class="variable">linear</span>,
        <span class="variable">interval</span>;

    <span class="keyword">if</span> (!<span class="variable">opacityType</span>) {
      <span class="variable">opacityType</span> = <span class="variable">getOpacityType</span>();
    }

    <span class="variable">options</span> = <span class="variable">options</span> || {};
    <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">hasOwnProperty</span>(<span class="string">'easing'</span>)) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">options</span>.<span class="variable">easing</span> === <span class="string">'string'</span>) {
        <span class="variable">easingFunction</span> = <span class="variable">easing</span>[<span class="variable">options</span>.<span class="variable">easing</span>];
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">easing</span>) {
        <span class="variable">easingFunction</span> = <span class="variable">options</span>.<span class="variable">easing</span>;
      }
    }

    <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">property</span> <span class="keyword">in</span> <span class="variable">properties</span>) {
      <span class="keyword">if</span> (<span class="variable">properties</span>.<span class="variable">hasOwnProperty</span>(<span class="variable">property</span>)) {
        <span class="variable">properties</span>[<span class="variable">property</span>] = <span class="variable">parseCSSValue</span>(<span class="variable">properties</span>[<span class="variable">property</span>], <span class="variable">element</span>, <span class="variable">property</span>);
        <span class="keyword">if</span> (<span class="variable">property</span> == <span class="string">'opacity'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">opacityType</span> == <span class="string">'filter'</span>) {
          <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">zoom</span> = <span class="number integer">1</span>;
        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="class">CSSTransitions</span>.<span class="variable">vendorPrefix</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">property</span> == <span class="string">'left'</span> || <span class="variable">property</span> == <span class="string">'top'</span>) {
          <span class="class">CSSTransitions</span>.<span class="variable">start</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">property</span>, <span class="variable">properties</span>[<span class="variable">property</span>].<span class="variable">value</span> + <span class="variable">properties</span>[<span class="variable">property</span>].<span class="variable">units</span>, <span class="variable">options</span>.<span class="variable">easing</span>);
          <span class="variable">setTimeout</span>(<span class="keyword">function</span>() { <span class="class">CSSTransitions</span>.<span class="variable">end</span>(<span class="variable">element</span>, <span class="variable">property</span>); }, <span class="variable">duration</span>);
          <span class="keyword">return</span>;
        }
      }
    }

    <span class="variable">interval</span> = <span class="variable">setInterval</span>(<span class="keyword">function</span>() {
      <span class="keyword">var</span> <span class="variable">time</span> = (<span class="keyword">new</span> <span class="class">Date</span>).<span class="variable">valueOf</span>(), <span class="variable">position</span> = <span class="variable">time</span> &<span class="variable">gt</span>; <span class="variable">finish</span> ? <span class="number integer">1</span> : (<span class="variable">time</span> - <span class="variable">start</span>) / <span class="variable">duration</span>;

      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">property</span> <span class="keyword">in</span> <span class="variable">properties</span>) {
        <span class="keyword">if</span> (<span class="variable">properties</span>.<span class="variable">hasOwnProperty</span>(<span class="variable">property</span>)) {
          <span class="variable">setCSSProperty</span>(
            <span class="variable">element</span>,
            <span class="variable">property</span>,
            <span class="variable">properties</span>[<span class="variable">property</span>].<span class="variable">transform</span>(<span class="variable">properties</span>[<span class="variable">property</span>], <span class="variable">position</span>, <span class="variable">easingFunction</span>) + <span class="variable">properties</span>[<span class="variable">property</span>].<span class="variable">units</span>);
        }
      }

      <span class="keyword">if</span> (<span class="variable">time</span> &<span class="variable">gt</span>; <span class="variable">finish</span>) {
        <span class="variable">clearInterval</span>(<span class="variable">interval</span>);
      }
    }, <span class="number integer">10</span>);
  };

  <span class="class">CSSTransitions</span> = {
    <span class="comment">// CSS3 vendor detection</span>
    <span class="variable">vendors</span>: {
      <span class="comment">// Opera Presto 2.3</span>
      <span class="string">'opera'</span>: {
        <span class="string">'prefix'</span>: <span class="string">'-o-'</span>,
        <span class="string">'detector'</span>: <span class="keyword">function</span>() {
          <span class="keyword">try</span> {
            <span class="variable">document</span>.<span class="variable">createEvent</span>(<span class="string">'OTransitionEvent'</span>);
            <span class="keyword">return</span> <span class="variable">true</span>;
          } <span class="keyword">catch</span>(<span class="variable">e</span>) {
            <span class="keyword">return</span> <span class="variable">false</span>;
          }
        }
      },

      <span class="comment">// Chrome 5, Safari 4</span>
      <span class="string">'webkit'</span>: {
        <span class="string">'prefix'</span>: <span class="string">'-webkit-'</span>,
        <span class="string">'detector'</span>: <span class="keyword">function</span>() {
          <span class="keyword">try</span> {
            <span class="variable">document</span>.<span class="variable">createEvent</span>(<span class="string">'WebKitTransitionEvent'</span>);
            <span class="keyword">return</span> <span class="variable">true</span>;
          } <span class="keyword">catch</span>(<span class="variable">e</span>) {
            <span class="keyword">return</span> <span class="variable">false</span>;
          }
        }
      },

      <span class="comment">// Firefox 4</span>
      <span class="string">'firefox'</span>: {
        <span class="string">'prefix'</span>: <span class="string">'-moz-'</span>,
        <span class="string">'detector'</span>: <span class="keyword">function</span>() {
          <span class="keyword">var</span> <span class="variable">div</span> = <span class="variable">document</span>.<span class="variable">createElement</span>(<span class="string">'div'</span>),
              <span class="variable">supported</span> = <span class="variable">false</span>;
          <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">div</span>.<span class="variable">style</span>.<span class="class">MozTransition</span> !== <span class="string">'undefined'</span>) {
            <span class="variable">supported</span> = <span class="variable">true</span>;
          }
          <span class="variable">div</span> = <span class="keyword">null</span>;
          <span class="keyword">return</span> <span class="variable">supported</span>;
        }
      }
    },

    <span class="variable">findCSS3VendorPrefix</span>: <span class="keyword">function</span>() {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">detector</span> <span class="keyword">in</span> <span class="class">CSSTransitions</span>.<span class="variable">vendors</span>) {
        <span class="variable">detector</span> = <span class="this">this</span>.<span class="variable">vendors</span>[<span class="variable">detector</span>];
        <span class="keyword">if</span> (<span class="variable">detector</span>[<span class="string">'detector'</span>]()) {
          <span class="keyword">return</span> <span class="variable">detector</span>[<span class="string">'prefix'</span>];
        }
      }
    },

    <span class="variable">vendorPrefix</span>: <span class="keyword">null</span>,

    <span class="comment">// CSS3 Transitions</span>
    <span class="variable">start</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">property</span>, <span class="variable">value</span>, <span class="variable">easing</span>) {
      <span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">camelize</span>(<span class="this">this</span>.<span class="variable">vendorPrefix</span> + <span class="string">'transition'</span>)] = <span class="variable">property</span> + <span class="string">' '</span> + <span class="variable">duration</span> + <span class="string">'ms '</span> + (<span class="variable">easing</span> || <span class="string">'linear'</span>);
      <span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">property</span>] = <span class="variable">value</span>;
    },

    <span class="variable">end</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>) {
      <span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">camelize</span>(<span class="this">this</span>.<span class="variable">vendorPrefix</span> + <span class="string">'transition'</span>)] = <span class="keyword">null</span>;
    }
  };

  <span class="class">CSSTransitions</span>.<span class="variable">vendorPrefix</span> = <span class="class">CSSTransitions</span>.<span class="variable">findCSS3VendorPrefix</span>();</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Fade an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>Number</em>  duration Duration in milliseconds</p></li><li><p><strong>param</strong>: <em>Object</em>  options to, from, easing function: <code>{ to: 1, from: 0, easing: 'bounce' }</code></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">fade</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>) {
    <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">opacity</span> = <span class="variable">options</span>.<span class="variable">from</span>;
    <span class="keyword">return</span> <span class="variable">anim</span>.<span class="variable">animate</span>(<span class="variable">element</span>, <span class="variable">duration</span>, { <span class="string">'opacity'</span>: <span class="variable">options</span>.<span class="variable">to</span> }, { <span class="string">'easing'</span>: <span class="variable">options</span>.<span class="variable">easing</span> });
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Fade in an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>Number</em>  duration Duration in milliseconds</p></li><li><p><strong>param</strong>: <em>Object</em>  options May include an easing function: <code>{ to: 1, from: 0, easing: 'bounce' }</code></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">fadeIn</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>) {
    <span class="variable">options</span> = <span class="variable">options</span> || {};
    <span class="variable">options</span>.<span class="variable">from</span> = <span class="variable">options</span>.<span class="variable">from</span> || <span class="number float">0.0</span>;
    <span class="variable">options</span>.<span class="variable">to</span> = <span class="variable">options</span>.<span class="variable">to</span> || <span class="number float">1.0</span>;
    <span class="keyword">return</span> <span class="variable">anim</span>.<span class="variable">fade</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Fade out an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>Number</em>  duration Duration in milliseconds</p></li><li><p><strong>param</strong>: <em>Object</em>  options May include an easing function: <code>{ to: 1, from: 0, easing: 'bounce' }</code></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">fadeOut</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>) {
    <span class="keyword">var</span> <span class="variable">from</span>;
    <span class="variable">options</span> = <span class="variable">options</span> || {};
    <span class="variable">options</span>.<span class="variable">from</span> = <span class="variable">options</span>.<span class="variable">from</span> || <span class="number float">1.0</span>;
    <span class="variable">options</span>.<span class="variable">to</span> = <span class="variable">options</span>.<span class="variable">to</span> || <span class="number float">0.0</span>;

    <span class="comment">// Swap from and to</span>
    <span class="variable">from</span> = <span class="variable">options</span>.<span class="variable">from</span>;
    <span class="variable">options</span>.<span class="variable">from</span> = <span class="variable">options</span>.<span class="variable">to</span>;
    <span class="variable">options</span>.<span class="variable">to</span> = <span class="variable">from</span>;

    <span class="comment">// This easing function reverses the position value and adds from</span>
    <span class="variable">options</span>.<span class="variable">easing</span> = <span class="keyword">function</span>(<span class="variable">p</span>) { <span class="keyword">return</span> (<span class="number float">1.0</span> - <span class="variable">p</span>) + <span class="variable">options</span>.<span class="variable">from</span>; };

    <span class="keyword">return</span> <span class="variable">anim</span>.<span class="variable">fade</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Highlight an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>Number</em>  duration Duration in milliseconds</p></li><li><p><strong>param</strong>: <em>Object</em>  options May include an easing function: <code>{ to: 1, from: 0, easing: 'bounce' }</code></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">highlight</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>) {
    <span class="keyword">var</span> <span class="variable">style</span> = <span class="variable">element</span>.<span class="variable">currentStyle</span> ? <span class="variable">element</span>.<span class="variable">currentStyle</span> : <span class="variable">getComputedStyle</span>(<span class="variable">element</span>, <span class="keyword">null</span>);
    <span class="variable">options</span> = <span class="variable">options</span> || {};
    <span class="variable">options</span>.<span class="variable">from</span> = <span class="variable">options</span>.<span class="variable">from</span> || <span class="string">'#ff9'</span>;
    <span class="variable">options</span>.<span class="variable">to</span> = <span class="variable">options</span>.<span class="variable">to</span> || <span class="variable">style</span>.<span class="variable">backgroundColor</span>;
    <span class="variable">options</span>.<span class="variable">easing</span> = <span class="variable">options</span>.<span class="variable">easing</span> || <span class="variable">easing</span>.<span class="variable">sine</span>;
    <span class="variable">duration</span> = <span class="variable">duration</span> || <span class="number integer">500</span>;
    <span class="variable">element</span>.<span class="variable">style</span>.<span class="variable">backgroundColor</span> = <span class="variable">options</span>.<span class="variable">from</span>;
    <span class="keyword">return</span> <span class="variable">setTimeout</span>(<span class="keyword">function</span>() {
      <span class="variable">anim</span>.<span class="variable">animate</span>(<span class="variable">element</span>, <span class="variable">duration</span>, { <span class="string">'backgroundColor'</span>: <span class="variable">options</span>.<span class="variable">to</span>, <span class="string">'easing'</span>: <span class="variable">options</span>.<span class="variable">easing</span> })
    }, <span class="number integer">200</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Move an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>Number</em>  duration Duration in milliseconds</p></li><li><p><strong>param</strong>: <em>Object</em>  options Position and easing, for example: <code>{ left: 100, top: 50, easing: 'sine' }</code></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">move</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>) {
    <span class="keyword">return</span> <span class="variable">anim</span>.<span class="variable">animate</span>(<span class="variable">element</span>, <span class="variable">duration</span>, { <span class="string">'left'</span>: <span class="variable">options</span>.<span class="variable">x</span>, <span class="string">'top'</span>: <span class="variable">options</span>.<span class="variable">y</span> }, { <span class="string">'easing'</span>: <span class="variable">options</span>.<span class="variable">easing</span> || <span class="variable">easing</span>.<span class="variable">sine</span> });
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Parse colour strings.  For example:</p>

<pre><code> assert.equal('rgb(255, 0, 255)',
              turing.anim.parseColour('#ff00ff').toString());</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  colourString A hex colour string</p></li><li><p><strong>returns</strong>: <em>String</em>  RGB string</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">parseColour</span> = <span class="keyword">function</span>(<span class="variable">colourString</span>) { <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Colour</span>(<span class="variable">colourString</span>); };
  <span class="variable">anim</span>.<span class="variable">pause</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">duration</span>, <span class="variable">options</span>) {};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Easing functions: linear, sine, reverse, spring, bounce.
   </p>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">easing</span> = <span class="variable">easing</span>;

  <span class="class">Chainer</span> = <span class="keyword">function</span>(<span class="variable">element</span>) {
    <span class="this">this</span>.<span class="variable">element</span> = <span class="variable">element</span>;
    <span class="this">this</span>.<span class="variable">position</span> = <span class="number integer">0</span>;
  };

  <span class="keyword">for</span> (<span class="variable">methodName</span> <span class="keyword">in</span> <span class="variable">anim</span>) {
    (<span class="keyword">function</span>(<span class="variable">methodName</span>) {
      <span class="keyword">var</span> <span class="variable">method</span> = <span class="variable">anim</span>[<span class="variable">methodName</span>];
      <span class="class">Chainer</span>.<span class="variable">prototype</span>[<span class="variable">methodName</span>] = <span class="keyword">function</span>() {
        <span class="keyword">var</span> <span class="variable">args</span> = <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">slice</span>.<span class="variable">call</span>(<span class="variable">arguments</span>);
        <span class="variable">args</span>.<span class="variable">unshift</span>(<span class="this">this</span>.<span class="variable">element</span>);
        <span class="comment">// Note: the duration needs to be communicated another way</span>
        <span class="comment">// because of defaults (like highlight())</span>
        <span class="this">this</span>.<span class="variable">position</span> += <span class="variable">args</span>[<span class="number integer">1</span>] || <span class="number integer">0</span>;
        <span class="variable">setTimeout</span>(<span class="keyword">function</span>() {
          <span class="variable">method</span>.<span class="variable">apply</span>(<span class="keyword">null</span>, <span class="variable">args</span>);
        }, <span class="this">this</span>.<span class="variable">position</span>);
        <span class="keyword">return</span> <span class="this">this</span>;
      };
    })(<span class="variable">methodName</span>);
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Chain animation module calls, for example:</p>

<pre><code>turing.anim.chain(element)
  .highlight()
  .pause(250)
  .move(100, { x: '100px', y: '100px', easing: 'ease-in-out' })
  .animate(250, { width: '1000px' })
  .fadeOut(250)
  .pause(250)
  .fadeIn(250)
  .animate(250, { width: '20px' });</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>returns</strong>: <em>Chainer</em>  Chained API object</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">chain</span> = <span class="keyword">function</span>(<span class="variable">element</span>) {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">Chainer</span>(<span class="variable">element</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Animations can be chained with DOM calls:</p>

<pre><code>  turing('p').animate(2000, {
    color: '#ff0000'
  });

</code></pre>
</td>
<td class="code">
<pre><code><span class="variable">anim</span>.<span class="variable">addDOMethods</span> = <span class="keyword">function</span>() {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">turing</span>.<span class="variable">domChain</span> === <span class="string">'undefined'</span>) <span class="keyword">return</span>;

    <span class="keyword">var</span> <span class="variable">chainedAliases</span> = (<span class="string">'animate fade fadeIn fadeOut highlight '</span> +
                          <span class="string">'move parseColour pause easing'</span>).<span class="variable">split</span>(<span class="string">' '</span>);

    <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">chainedAliases</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
      (<span class="keyword">function</span>(<span class="variable">name</span>) {
        <span class="variable">turing</span>.<span class="variable">domChain</span>[<span class="variable">name</span>] = <span class="keyword">function</span>(<span class="variable">handler</span>) {
          <span class="keyword">var</span> <span class="variable">j</span>, <span class="variable">args</span> = <span class="variable">turing</span>.<span class="variable">toArray</span>(<span class="variable">arguments</span>);
          <span class="variable">args</span>.<span class="variable">unshift</span>(<span class="keyword">null</span>);

          <span class="keyword">for</span> (<span class="variable">j</span> = <span class="number integer">0</span>; <span class="variable">j</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">length</span>; <span class="variable">j</span>++) {
            <span class="variable">args</span>[<span class="number integer">0</span>] = <span class="this">this</span>[<span class="variable">j</span>];
            <span class="variable">anim</span>[<span class="variable">name</span>].<span class="variable">apply</span>(<span class="this">this</span>, <span class="variable">args</span>);
          }
          <span class="keyword">return</span> <span class="this">this</span>;
        };
      })(<span class="variable">chainedAliases</span>[<span class="variable">i</span>]);
    }
  };
  <span class="variable">anim</span>.<span class="variable">addDOMethods</span>();

  <span class="variable">turing</span>.<span class="variable">anim</span> = <span class="variable">anim</span>;
})();
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.core.js"><a href="#">turing.core</a></h2></td><td>turing.core.js</td></tr><tr class="code">
<td class="docs">
<p>A private namespace to set things up against the global object.
 </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>(<span class="variable">global</span>) {
  <span class="keyword">var</span> <span class="variable">middleware</span> = [];</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>The turing object.  Use <code>turing('selector')</code> for quick DOM access when built with the DOM module.</p>

<h2></h2>

<ul><li><p><strong>returns</strong>: <em>Object</em>  The turing object, run through <code>init</code></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">turing</span>() {
    <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
      <span class="keyword">var</span> <span class="variable">result</span>;
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">middleware</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="variable">result</span> = <span class="variable">middleware</span>[<span class="variable">i</span>].<span class="variable">apply</span>(<span class="variable">turing</span>, <span class="variable">arguments</span>);
        <span class="keyword">if</span> (<span class="variable">result</span>) <span class="keyword">return</span> <span class="variable">result</span>;
      }
    }
  }

  <span class="variable">turing</span>.<span class="class">VERSION</span> = <span class="string">'0.0.64'</span>;
  <span class="variable">turing</span>.<span class="variable">lesson</span> = <span class="string">'Part 64: Properties'</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>This alias will be used as an alternative to <code>turing()</code>.
If <code>__turing_alias</code> is present in the global scope this will be used instead. </p>

<p>   </p>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">alias</span> = <span class="variable">global</span>.<span class="variable">__turing_alias</span> || <span class="string">'$t'</span>;
  <span class="variable">global</span>[<span class="variable">turing</span>.<span class="variable">alias</span>] = <span class="variable">turing</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Determine if an object is an <code>Array</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  object An object that may or may not be an array</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  True if the parameter is an array</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">isArray</span> = <span class="class">Array</span>.<span class="variable">isArray</span> || <span class="keyword">function</span>(<span class="variable">object</span>) {
    <span class="keyword">return</span> !!(<span class="variable">object</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">object</span>.<span class="variable">concat</span>
              &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">object</span>.<span class="variable">unshift</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; !<span class="variable">object</span>.<span class="variable">callee</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Convert an <code>Array</code>-like collection into an <code>Array</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  collection A collection of items that responds to length</p></li><li><p><strong>returns</strong>: <em>Array</em>  An <code>Array</code> of items</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">toArray</span> = <span class="keyword">function</span>(<span class="variable">collection</span>) {
    <span class="keyword">var</span> <span class="variable">results</span> = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">collection</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
      <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">collection</span>[<span class="variable">i</span>]);
    }
    <span class="keyword">return</span> <span class="variable">results</span>;
  };

  <span class="comment">// This can be overriden by libraries that extend turing(...)</span>
  <span class="variable">turing</span>.<span class="variable">init</span> = <span class="keyword">function</span>(<span class="variable">fn</span>) {
    <span class="variable">middleware</span>.<span class="variable">unshift</span>(<span class="variable">fn</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Determines if an object is a <code>Number</code>.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  object A value to test</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  True if the object is a Number</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">isNumber</span> = <span class="keyword">function</span>(<span class="variable">object</span>) {
    <span class="keyword">return</span> (<span class="variable">object</span> === +<span class="variable">object</span>) || (<span class="variable">toString</span>.<span class="variable">call</span>(<span class="variable">object</span>) === <span class="string">'[object Number]'</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Binds a function to an object.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Function</em>  fn A function</p></li><li><p><strong>param</strong>: <em>Object</em>  object An object to bind to</p></li><li><p><strong>returns</strong>: <em>Function</em>  A rebound method</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">bind</span> = <span class="keyword">function</span>(<span class="variable">fn</span>, <span class="variable">object</span>) {
    <span class="keyword">var</span> <span class="variable">slice</span> = <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">slice</span>,
        <span class="variable">args</span>  = <span class="variable">slice</span>.<span class="variable">apply</span>(<span class="variable">arguments</span>, [<span class="number integer">2</span>]);
    <span class="keyword">return</span> <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="variable">fn</span>.<span class="variable">apply</span>(<span class="variable">object</span> || {}, <span class="variable">args</span>.<span class="variable">concat</span>(<span class="variable">slice</span>.<span class="variable">apply</span>(<span class="variable">arguments</span>)));
    };
  };

  <span class="keyword">var</span> <span class="variable">testCache</span> = {},
      <span class="variable">detectionTests</span> = {};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Used to add feature-detection methods.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name The name of the test</p></li><li><p><strong>param</strong>: <em>Function</em>  fn The function that performs the test</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">addDetectionTest</span> = <span class="keyword">function</span>(<span class="variable">name</span>, <span class="variable">fn</span>) {
    <span class="keyword">if</span> (!<span class="variable">detectionTests</span>[<span class="variable">name</span>])
      <span class="variable">detectionTests</span>[<span class="variable">name</span>] = <span class="variable">fn</span>;
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Run a feature detection name.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  name The name of the test</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  The outcome of the test</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">detect</span> = <span class="keyword">function</span>(<span class="variable">testName</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">testCache</span>[<span class="variable">testCache</span>] === <span class="string">'undefined'</span>) {
      <span class="variable">testCache</span>[<span class="variable">testName</span>] = <span class="variable">detectionTests</span>[<span class="variable">testName</span>]();
    }
    <span class="keyword">return</span> <span class="variable">testCache</span>[<span class="variable">testName</span>];
  };

  <span class="keyword">if</span> (<span class="variable">global</span>.<span class="variable">turing</span>) {
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">Error</span>(<span class="string">'turing has already been defined'</span>);
  } <span class="keyword">else</span> {
    <span class="variable">global</span>.<span class="variable">turing</span> = <span class="variable">turing</span>;
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">exports</span> !== <span class="string">'undefined'</span>) <span class="variable">exports</span>.<span class="variable">turing</span> = <span class="variable">turing</span>;
  }
})(<span class="keyword">typeof</span> <span class="variable">window</span> === <span class="string">'undefined'</span> ? <span class="this">this</span> : <span class="variable">window</span>);


</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.dom.js"><a href="#">turing.dom</a></h2></td><td>turing.dom.js</td></tr><tr class="code">
<td class="docs">
<p>The Turing DOM module.
 </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>() {
  <span class="keyword">var</span> <span class="variable">dom</span> = {}, <span class="class">InvalidFinder</span> = <span class="class">Error</span>, <span class="variable">macros</span>, <span class="variable">rules</span>, <span class="variable">tokenMap</span>,
      <span class="variable">find</span>, <span class="variable">matchMap</span>, <span class="variable">findMap</span>, <span class="variable">filter</span>, <span class="variable">scannerRegExp</span>, <span class="variable">nodeTypes</span>,
      <span class="variable">getStyle</span>, <span class="variable">setStyle</span>, <span class="variable">cssNumericalProperty</span>, <span class="variable">propertyFix</span>,
      <span class="variable">getAttributeParamFix</span>, <span class="variable">booleanAttributes</span>;

  <span class="variable">macros</span> = {
    <span class="string">'nl'</span>:        <span class="string">'\n|\r\n|\r|\f'</span>,
    <span class="string">'w'</span>:         <span class="string">'[\s\r\n\f]*'</span>,
    <span class="string">'nonascii'</span>:  <span class="string">'[^\0-\177]'</span>,
    <span class="string">'num'</span>:       <span class="string">'-?([0-9]+|[0-9]*\.[0-9]+)'</span>,
    <span class="string">'unicode'</span>:   <span class="string">'\\[0-9A-Fa-f]{1,6}(\r\n|[\s\n\r\t\f])?'</span>,
    <span class="string">'escape'</span>:    <span class="string">'#{unicode}|\\[^\n\r\f0-9A-Fa-f]'</span>,
    <span class="string">'nmchar'</span>:    <span class="string">'[_A-Za-z0-9-]|#{nonascii}|#{escape}'</span>,
    <span class="string">'nmstart'</span>:   <span class="string">'[_A-Za-z]|#{nonascii}|#{escape}'</span>,
    <span class="string">'ident'</span>:     <span class="string">'[-@]?(#{nmstart})(#{nmchar})*'</span>,
    <span class="string">'name'</span>:      <span class="string">'(#{nmchar})+'</span>,
    <span class="string">'string1'</span>:   <span class="string">'&quot;([^\n\r\f&quot;]|#{nl}|#{nonascii}|#{escape})*&quot;'</span>,
    <span class="string">'string2'</span>:   &<span class="variable">quot</span>;<span class="string">'([^\n\r\f'</span>]|#{<span class="variable">nl</span>}|#{<span class="variable">nonascii</span>}|#{<span class="variable">escape</span>})*'&<span class="variable">quot</span>;,
    <span class="string">'string'</span>:    <span class="string">'#{string1}|#{string2}'</span>
  };

  <span class="variable">nodeTypes</span> = {
    <span class="class">ELEMENT_NODE</span>:                  <span class="number integer">1</span>,
    <span class="class">ATTRIBUTE_NODE</span>:                <span class="number integer">2</span>,
    <span class="class">TEXT_NODE</span>:                     <span class="number integer">3</span>,
    <span class="class">CDATA_SECTION_NODE</span>:            <span class="number integer">4</span>,
    <span class="class">ENTITY_REFERENCE_NODE</span>:         <span class="number integer">5</span>,
    <span class="class">ENTITY_NODE</span>:                   <span class="number integer">6</span>,
    <span class="class">PROCESSING_INSTRUCTION_NODE</span>:   <span class="number integer">7</span>,
    <span class="class">COMMENT_NODE</span>:                  <span class="number integer">8</span>,
    <span class="class">DOCUMENT_NODE</span>:                 <span class="number integer">9</span>,
    <span class="class">DOCUMENT_TYPE_NODE</span>:            <span class="number integer">10</span>,
    <span class="class">DOCUMENT_FRAGMENT_NODE</span>:        <span class="number integer">11</span>,
    <span class="class">NOTATION_NODE</span>:                 <span class="number integer">12</span>
  };

  <span class="variable">cssNumericalProperty</span> = {
    <span class="string">'zIndex'</span>:     <span class="variable">true</span>,
    <span class="string">'fontWeight'</span>: <span class="variable">true</span>,
    <span class="string">'opacity'</span>:    <span class="variable">true</span>,
    <span class="string">'zoom'</span>:       <span class="variable">true</span>,
    <span class="string">'lineHeight'</span>: <span class="variable">true</span>
  };

  <span class="variable">booleanAttributes</span> = {
    <span class="string">'selected'</span>: <span class="variable">true</span>,
    <span class="string">'readonly'</span>: <span class="variable">true</span>,
    <span class="string">'checked'</span>:  <span class="variable">true</span>
  };

  <span class="variable">rules</span> = {
    <span class="string">'name and id'</span>:    <span class="string">'(#{ident}##{ident})'</span>,
    <span class="string">'id'</span>:             <span class="string">'(##{ident})'</span>,
    <span class="string">'class'</span>:          <span class="string">'(\\.#{ident})'</span>,
    <span class="string">'name and class'</span>: <span class="string">'(#{ident}\\.#{ident})'</span>,
    <span class="string">'element'</span>:        <span class="string">'(#{ident})'</span>,
    <span class="string">'pseudo class'</span>:   <span class="string">'(:#{ident})'</span>
  };

  <span class="variable">propertyFix</span> = {
    <span class="variable">tabindex</span>:        <span class="string">'tabIndex'</span>,
    <span class="variable">readonly</span>:        <span class="string">'readOnly'</span>,
    <span class="string">'for'</span>:           <span class="string">'htmlFor'</span>,
    <span class="string">'class'</span>:         <span class="string">'className'</span>,
    <span class="variable">maxlength</span>:       <span class="string">'maxLength'</span>,
    <span class="variable">cellspacing</span>:     <span class="string">'cellSpacing'</span>,
    <span class="variable">cellpadding</span>:     <span class="string">'cellPadding'</span>,
    <span class="variable">rowspan</span>:         <span class="string">'rowSpan'</span>,
    <span class="variable">colspan</span>:         <span class="string">'colSpan'</span>,
    <span class="variable">usemap</span>:          <span class="string">'useMap'</span>,
    <span class="variable">frameborder</span>:     <span class="string">'frameBorder'</span>,
    <span class="variable">contenteditable</span>: <span class="string">'contentEditable'</span>
  };

  <span class="variable">getAttributeParamFix</span> = {
    <span class="variable">width</span>: <span class="variable">true</span>,
    <span class="variable">height</span>: <span class="variable">true</span>,
    <span class="variable">src</span>: <span class="variable">true</span>,
    <span class="variable">href</span>: <span class="variable">true</span>
  };

  <span class="keyword">function</span> <span class="variable">scanner</span>() {
    <span class="keyword">function</span> <span class="variable">replacePattern</span>(<span class="variable">pattern</span>, <span class="variable">patterns</span>) {
      <span class="keyword">var</span> <span class="variable">matched</span> = <span class="variable">true</span>, <span class="variable">match</span>;
      <span class="keyword">while</span> (<span class="variable">matched</span>) {
        <span class="variable">match</span> = <span class="variable">pattern</span>.<span class="variable">match</span>(<span class="regexp">/#\{([^}]+)\}/</span>);
        <span class="keyword">if</span> (<span class="variable">match</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">match</span>[<span class="number integer">1</span>]) {
          <span class="variable">pattern</span> = <span class="variable">pattern</span>.<span class="variable">replace</span>(<span class="keyword">new</span> <span class="class">RegExp</span>(<span class="string">'#\{'</span> + <span class="variable">match</span>[<span class="number integer">1</span>] + <span class="string">'\}'</span>, <span class="string">'g'</span>), <span class="variable">patterns</span>[<span class="variable">match</span>[<span class="number integer">1</span>]]);
          <span class="variable">matched</span> = <span class="variable">true</span>;
        } <span class="keyword">else</span> {
          <span class="variable">matched</span> = <span class="variable">false</span>;
        }
      }
      <span class="keyword">return</span> <span class="variable">pattern</span>;
    }

    <span class="keyword">function</span> <span class="variable">escapePattern</span>(<span class="variable">text</span>) {
      <span class="keyword">return</span> <span class="variable">text</span>.<span class="variable">replace</span>(<span class="regexp">/\/</span><span class="regexp">/g, '/</span>/');
    }

    <span class="keyword">function</span> <span class="variable">convertPatterns</span>() {
      <span class="keyword">var</span> <span class="variable">key</span>, <span class="variable">pattern</span>, <span class="variable">results</span> = {}, <span class="variable">patterns</span>, <span class="variable">source</span>;

      <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">2</span>) {
        <span class="variable">source</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
        <span class="variable">patterns</span> = <span class="variable">arguments</span>[<span class="number integer">1</span>];
      } <span class="keyword">else</span> {
        <span class="variable">source</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
        <span class="variable">patterns</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
      }

      <span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">patterns</span>) {
        <span class="variable">pattern</span> = <span class="variable">escapePattern</span>(<span class="variable">replacePattern</span>(<span class="variable">patterns</span>[<span class="variable">key</span>], <span class="variable">source</span>));
        <span class="variable">results</span>[<span class="variable">key</span>] = <span class="variable">pattern</span>;
      }

      <span class="keyword">return</span> <span class="variable">results</span>;
    }

    <span class="keyword">function</span> <span class="variable">joinPatterns</span>(<span class="variable">regexps</span>) {
      <span class="keyword">var</span> <span class="variable">results</span> = [], <span class="variable">key</span>;
      <span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">regexps</span>) {
        <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">regexps</span>[<span class="variable">key</span>]);
      }
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">RegExp</span>(<span class="variable">results</span>.<span class="variable">join</span>(<span class="string">'|'</span>), <span class="string">'g'</span>);
    }

    <span class="keyword">return</span> <span class="variable">joinPatterns</span>(
      <span class="variable">convertPatterns</span>(<span class="variable">convertPatterns</span>(<span class="variable">macros</span>), <span class="variable">rules</span>)
    );
  }

  <span class="variable">scannerRegExp</span> = <span class="variable">scanner</span>();

  <span class="variable">find</span> = {
    <span class="variable">byId</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">id</span>) {
      <span class="keyword">if</span> (<span class="variable">root</span> === <span class="keyword">null</span>) <span class="keyword">return</span> [];
      <span class="keyword">return</span> [<span class="variable">root</span>.<span class="variable">getElementById</span>(<span class="variable">id</span>)];
    },

    <span class="variable">byNodeName</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">tagName</span>) {
      <span class="keyword">if</span> (<span class="variable">root</span> === <span class="keyword">null</span>) <span class="keyword">return</span> [];
      <span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">results</span> = [], <span class="variable">nodes</span> = <span class="variable">root</span>.<span class="variable">getElementsByTagName</span>(<span class="variable">tagName</span>);
      <span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">nodes</span>[<span class="variable">i</span>]);
      }
      <span class="keyword">return</span> <span class="variable">results</span>;
    },

    <span class="variable">byClassName</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">className</span>) {
      <span class="keyword">if</span> (<span class="variable">root</span> === <span class="keyword">null</span>) <span class="keyword">return</span> [];
      <span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">results</span> = [], <span class="variable">nodes</span> = <span class="variable">root</span>.<span class="variable">getElementsByTagName</span>(<span class="string">'*'</span>);
      <span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">nodes</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="keyword">if</span> (<span class="variable">nodes</span>[<span class="variable">i</span>].<span class="variable">className</span>.<span class="variable">match</span>(<span class="string">'\\b'</span> + <span class="variable">className</span> + <span class="string">'\\b'</span>)) {
          <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">nodes</span>[<span class="variable">i</span>]);
        }
      }
      <span class="keyword">return</span> <span class="variable">results</span>;
    }
  };

  <span class="variable">findMap</span> = {
    <span class="string">'id'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
      <span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>)[<span class="number integer">1</span>];
      <span class="keyword">return</span> <span class="variable">find</span>.<span class="variable">byId</span>(<span class="variable">root</span>, <span class="variable">selector</span>);
    },

    <span class="string">'name and id'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
      <span class="keyword">var</span> <span class="variable">matches</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>), <span class="variable">name</span>, <span class="variable">id</span>;
      <span class="variable">name</span> = <span class="variable">matches</span>[<span class="number integer">0</span>];
      <span class="variable">id</span> = <span class="variable">matches</span>[<span class="number integer">1</span>];
      <span class="keyword">return</span> <span class="variable">filter</span>.<span class="variable">byAttr</span>(<span class="variable">find</span>.<span class="variable">byId</span>(<span class="variable">root</span>, <span class="variable">id</span>), <span class="string">'nodeName'</span>, <span class="variable">name</span>.<span class="variable">toUpperCase</span>());
    },

    <span class="string">'name'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
      <span class="keyword">return</span> <span class="variable">find</span>.<span class="variable">byNodeName</span>(<span class="variable">root</span>, <span class="variable">selector</span>);
    },

    <span class="string">'class'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
      <span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>)[<span class="number integer">1</span>];
      <span class="keyword">return</span> <span class="variable">find</span>.<span class="variable">byClassName</span>(<span class="variable">root</span>, <span class="variable">selector</span>);
    },

    <span class="string">'name and class'</span>: <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">selector</span>) {
      <span class="keyword">var</span> <span class="variable">matches</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>), <span class="variable">name</span>, <span class="variable">className</span>;
      <span class="variable">name</span> = <span class="variable">matches</span>[<span class="number integer">0</span>];
      <span class="variable">className</span> = <span class="variable">matches</span>[<span class="number integer">1</span>];
      <span class="keyword">return</span> <span class="variable">filter</span>.<span class="variable">byAttr</span>(<span class="variable">find</span>.<span class="variable">byClassName</span>(<span class="variable">root</span>, <span class="variable">className</span>), <span class="string">'nodeName'</span>, <span class="variable">name</span>.<span class="variable">toUpperCase</span>());
    }
  };

  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">document</span>.<span class="variable">getElementsByClassName</span> !== <span class="string">'undefined'</span>) {
    <span class="variable">find</span>.<span class="variable">byClassName</span> = <span class="keyword">function</span>(<span class="variable">root</span>, <span class="variable">className</span>) {
      <span class="keyword">return</span> <span class="variable">root</span>.<span class="variable">getElementsByClassName</span>(<span class="variable">className</span>);
    };
  }

  <span class="variable">filter</span> = {
    <span class="variable">byAttr</span>: <span class="keyword">function</span>(<span class="variable">elements</span>, <span class="variable">attribute</span>, <span class="variable">value</span>) {
      <span class="keyword">var</span> <span class="variable">key</span>, <span class="variable">results</span> = [];
      <span class="keyword">for</span> (<span class="variable">key</span> <span class="keyword">in</span> <span class="variable">elements</span>) {
        <span class="keyword">if</span> (<span class="variable">elements</span>[<span class="variable">key</span>] &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">elements</span>[<span class="variable">key</span>][<span class="variable">attribute</span>] === <span class="variable">value</span>) {
          <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">elements</span>[<span class="variable">key</span>]);
        }
      }
      <span class="keyword">return</span> <span class="variable">results</span>;
    }
  };

  <span class="variable">matchMap</span> = {
    <span class="string">'id'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
      <span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>)[<span class="number integer">1</span>];
      <span class="keyword">return</span> <span class="variable">element</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">id</span> === <span class="variable">selector</span>;
    },

    <span class="string">'name'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">nodeName</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">nodeName</span> === <span class="variable">nodeName</span>.<span class="variable">toUpperCase</span>();
    },

    <span class="string">'name and id'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
      <span class="keyword">return</span> <span class="variable">matchMap</span>.<span class="variable">id</span>(<span class="variable">element</span>, <span class="variable">selector</span>) &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">matchMap</span>.<span class="variable">name</span>(<span class="variable">element</span>, <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'#'</span>)[<span class="number integer">0</span>]);
    },

    <span class="string">'class'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
      <span class="keyword">if</span> (<span class="variable">element</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">className</span>) {
        <span class="variable">selector</span> = <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>)[<span class="number integer">1</span>];
        <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">className</span>.<span class="variable">match</span>(<span class="string">'\\b'</span> + <span class="variable">selector</span> + <span class="string">'\\b'</span>); 
      }
    },

    <span class="string">'name and class'</span>: <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>) {
      <span class="keyword">return</span> <span class="variable">matchMap</span>[<span class="string">'class'</span>](<span class="variable">element</span>, <span class="variable">selector</span>) &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">matchMap</span>.<span class="variable">name</span>(<span class="variable">element</span>, <span class="variable">selector</span>.<span class="variable">split</span>(<span class="string">'\.'</span>)[<span class="number integer">0</span>]);
    }
  };

  <span class="keyword">function</span> <span class="class">Searcher</span>(<span class="variable">root</span>, <span class="variable">tokens</span>) {
    <span class="this">this</span>.<span class="variable">root</span> = <span class="variable">root</span>;
    <span class="this">this</span>.<span class="variable">key_selector</span> = <span class="variable">tokens</span>.<span class="variable">pop</span>();
    <span class="this">this</span>.<span class="variable">tokens</span> = <span class="variable">tokens</span>;
    <span class="this">this</span>.<span class="variable">results</span> = [];
  }

  <span class="class">Searcher</span>.<span class="variable">prototype</span>.<span class="variable">matchesToken</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">token</span>) {
    <span class="keyword">if</span> (!<span class="variable">matchMap</span>[<span class="variable">token</span>.<span class="variable">finder</span>]) {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">InvalidFinder</span>(<span class="string">'Invalid matcher: '</span> + <span class="variable">token</span>.<span class="variable">finder</span>); 
    }
    <span class="keyword">return</span> <span class="variable">matchMap</span>[<span class="variable">token</span>.<span class="variable">finder</span>](<span class="variable">element</span>, <span class="variable">token</span>.<span class="variable">identity</span>);
  };

  <span class="class">Searcher</span>.<span class="variable">prototype</span>.<span class="variable">find</span> = <span class="keyword">function</span>(<span class="variable">token</span>) {
    <span class="keyword">if</span> (!<span class="variable">findMap</span>[<span class="variable">token</span>.<span class="variable">finder</span>]) {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="class">InvalidFinder</span>(<span class="string">'Invalid finder: '</span> + <span class="variable">token</span>.<span class="variable">finder</span>); 
    }
    <span class="keyword">return</span> <span class="variable">findMap</span>[<span class="variable">token</span>.<span class="variable">finder</span>](<span class="this">this</span>.<span class="variable">root</span>, <span class="variable">token</span>.<span class="variable">identity</span>); 
  };

  <span class="class">Searcher</span>.<span class="variable">prototype</span>.<span class="variable">matchesAllRules</span> = <span class="keyword">function</span>(<span class="variable">element</span>) {
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">tokens</span>.<span class="variable">length</span> === <span class="number integer">0</span>) <span class="keyword">return</span>;

    <span class="keyword">var</span> <span class="variable">i</span> = <span class="this">this</span>.<span class="variable">tokens</span>.<span class="variable">length</span> - <span class="number integer">1</span>,
        <span class="variable">token</span> = <span class="this">this</span>.<span class="variable">tokens</span>[<span class="variable">i</span>],
        <span class="variable">matchFound</span> = <span class="variable">false</span>;

    <span class="keyword">while</span> (<span class="variable">i</span> &<span class="variable">gt</span>;= <span class="number integer">0</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">matchesToken</span>(<span class="variable">element</span>, <span class="variable">token</span>)) {
        <span class="variable">matchFound</span> = <span class="variable">true</span>;
        <span class="variable">i</span>--;
        <span class="variable">token</span> = <span class="this">this</span>.<span class="variable">tokens</span>[<span class="variable">i</span>];
      }
      <span class="variable">element</span> = <span class="variable">element</span>.<span class="variable">parentNode</span>;
    }

    <span class="keyword">return</span> <span class="variable">matchFound</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="number integer">0</span>;
  };

  <span class="class">Searcher</span>.<span class="variable">prototype</span>.<span class="variable">parse</span> = <span class="keyword">function</span>() {
    <span class="comment">// Find all elements with the key selector</span>
    <span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">element</span>, <span class="variable">elements</span> = <span class="this">this</span>.<span class="variable">find</span>(<span class="this">this</span>.<span class="variable">key_selector</span>), <span class="variable">results</span> = [];

    <span class="comment">// Traverse upwards from each element to see if it matches all of the rules</span>
    <span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
      <span class="variable">element</span> = <span class="variable">elements</span>[<span class="variable">i</span>];
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">tokens</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
        <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">matchesAllRules</span>(<span class="variable">element</span>.<span class="variable">parentNode</span>)) {
          <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">element</span>);
        }
      } <span class="keyword">else</span> {
        <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">matchesToken</span>(<span class="variable">element</span>, <span class="this">this</span>.<span class="variable">key_selector</span>)) {
          <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">element</span>);
        }
      }
    }
    <span class="keyword">return</span> <span class="variable">results</span>;
  };

  <span class="class">Searcher</span>.<span class="variable">prototype</span>.<span class="variable">values</span> = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">results</span>;
  };

  <span class="keyword">function</span> <span class="variable">normalize</span>(<span class="variable">text</span>) {
    <span class="keyword">return</span> <span class="variable">text</span>.<span class="variable">replace</span>(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">''</span>).<span class="variable">replace</span>(<span class="regexp">/[ \t\r\n\f]+/g</span>, <span class="string">' '</span>);
  }

  <span class="comment">// Tokens are used by the Tokenizer</span>
  <span class="keyword">function</span> <span class="class">Token</span>(<span class="variable">identity</span>, <span class="variable">finder</span>) {
    <span class="this">this</span>.<span class="variable">identity</span> = <span class="variable">identity</span>;
    <span class="this">this</span>.<span class="variable">finder</span>   = <span class="variable">finder</span>;
  }

  <span class="class">Token</span>.<span class="variable">prototype</span>.<span class="variable">toString</span> = <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="string">'identity: '</span> + <span class="this">this</span>.<span class="variable">identity</span> + <span class="string">', finder: '</span> + <span class="this">this</span>.<span class="variable">finder</span>;
  };

  <span class="comment">// Tokenizer: classify sections of the scanner output</span>
  <span class="keyword">function</span> <span class="class">Tokenizer</span>(<span class="variable">selector</span>) {
    <span class="this">this</span>.<span class="variable">selector</span> = <span class="variable">normalize</span>(<span class="variable">selector</span>);
    <span class="this">this</span>.<span class="variable">tokens</span> = [];
    <span class="this">this</span>.<span class="variable">tokenize</span>();
  }

  <span class="class">Tokenizer</span>.<span class="variable">prototype</span>.<span class="variable">tokenize</span> = <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">match</span>, <span class="variable">r</span>, <span class="variable">finder</span>;

    <span class="variable">r</span> = <span class="variable">scannerRegExp</span>;
    <span class="variable">r</span>.<span class="variable">lastIndex</span> = <span class="number integer">0</span>;

    <span class="keyword">while</span> (<span class="variable">match</span> = <span class="variable">r</span>.<span class="variable">exec</span>(<span class="this">this</span>.<span class="variable">selector</span>)) {
      <span class="variable">finder</span> = <span class="keyword">null</span>;

      <span class="keyword">if</span> (<span class="variable">match</span>[<span class="number integer">10</span>]) {
        <span class="variable">finder</span> = <span class="string">'id'</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">match</span>[<span class="number integer">1</span>]) {
        <span class="variable">finder</span> = <span class="string">'name and id'</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">match</span>[<span class="number integer">29</span>]) {
        <span class="variable">finder</span> = <span class="string">'name'</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">match</span>[<span class="number integer">15</span>]) {
        <span class="variable">finder</span> = <span class="string">'class'</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">match</span>[<span class="number integer">20</span>]) {
        <span class="variable">finder</span> = <span class="string">'name and class'</span>;
      }
      <span class="this">this</span>.<span class="variable">tokens</span>.<span class="variable">push</span>(<span class="keyword">new</span> <span class="class">Token</span>(<span class="variable">match</span>[<span class="number integer">0</span>], <span class="variable">finder</span>));
    }
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">tokens</span>;
  };

  <span class="class">Tokenizer</span>.<span class="variable">prototype</span>.<span class="variable">finders</span> = <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">i</span>, <span class="variable">results</span> = [];
    <span class="keyword">for</span> (<span class="variable">i</span> <span class="keyword">in</span> <span class="this">this</span>.<span class="variable">tokens</span>) {
      <span class="variable">results</span>.<span class="variable">push</span>(<span class="this">this</span>.<span class="variable">tokens</span>[<span class="variable">i</span>].<span class="variable">finder</span>);
    }
    <span class="keyword">return</span> <span class="variable">results</span>;
  };

  <span class="variable">dom</span>.<span class="variable">tokenize</span> = <span class="keyword">function</span>(<span class="variable">selector</span>) {
    <span class="keyword">var</span> <span class="variable">tokenizer</span> = <span class="keyword">new</span> <span class="class">Tokenizer</span>(<span class="variable">selector</span>);
    <span class="keyword">return</span> <span class="variable">tokenizer</span>;
  };

  <span class="keyword">function</span> <span class="variable">get</span>(<span class="variable">selector</span>, <span class="variable">root</span>) {
    <span class="keyword">var</span> <span class="variable">tokens</span> = <span class="variable">dom</span>.<span class="variable">tokenize</span>(<span class="variable">selector</span>).<span class="variable">tokens</span>,
        <span class="variable">searcher</span> = <span class="keyword">new</span> <span class="class">Searcher</span>(<span class="variable">root</span>, <span class="variable">tokens</span>);
    <span class="keyword">return</span> <span class="variable">searcher</span>.<span class="variable">parse</span>();
  }

  <span class="variable">turing</span>.<span class="variable">addDetectionTest</span>(<span class="string">'querySelectorAll'</span>, <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">div</span> = <span class="variable">document</span>.<span class="variable">createElement</span>(<span class="string">'div'</span>);
    <span class="variable">div</span>.<span class="variable">innerHTML</span> = <span class="string">'&lt;p class=&quot;TEST&quot;&gt;&lt;/p&gt;'</span>;

    <span class="comment">// Some versions of Safari can't handle uppercase in quirks mode</span>
    <span class="keyword">if</span> (<span class="variable">div</span>.<span class="variable">querySelectorAll</span>) {
      <span class="keyword">if</span> (<span class="variable">div</span>.<span class="variable">querySelectorAll</span>(<span class="string">'.TEST'</span>).<span class="variable">length</span> === <span class="number integer">0</span>) <span class="keyword">return</span> <span class="variable">false</span>;
      <span class="keyword">return</span> <span class="variable">true</span>;
    }

    <span class="comment">// Helps IE release memory associated with the div</span>
    <span class="variable">div</span> = <span class="keyword">null</span>;
    <span class="keyword">return</span> <span class="variable">false</span>;
  });</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Converts property names with hyphens to camelCase.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  text A property name</p></li><li><p><strong>returns</strong>: <em>String</em>  text A camelCase property name</p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">camelCase</span>(<span class="variable">text</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">text</span> !== <span class="string">'string'</span>) <span class="keyword">return</span>;
    <span class="keyword">return</span> <span class="variable">text</span>.<span class="variable">replace</span>(<span class="regexp">/-([a-z])/ig</span>, <span class="keyword">function</span>(<span class="variable">all</span>, <span class="variable">letter</span>) { <span class="keyword">return</span> <span class="variable">letter</span>.<span class="variable">toUpperCase</span>(); });
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Converts property names in camelCase to ones with hyphens.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  text A property name</p></li><li><p><strong>returns</strong>: <em>String</em>  text A camelCase property name</p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">uncamel</span>(<span class="variable">text</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">text</span> !== <span class="string">'string'</span>) <span class="keyword">return</span>;
    <span class="keyword">return</span> <span class="variable">text</span>.<span class="variable">replace</span>(<span class="regexp">/([A-Z])/g</span>, <span class="string">'-$1'</span>).<span class="variable">toLowerCase</span>();
  };

  <span class="keyword">function</span> <span class="variable">invalidCSSNode</span>(<span class="variable">element</span>) {
    <span class="keyword">return</span> !<span class="variable">element</span> || <span class="variable">element</span>.<span class="variable">nodeType</span> === <span class="variable">nodeTypes</span>.<span class="class">TEXT_NODE</span> || <span class="variable">element</span>.<span class="variable">nodeType</span> === <span class="variable">nodeTypes</span>.<span class="class">COMMENT_NODE</span> || !<span class="variable">element</span>.<span class="variable">style</span>;
  }

  <span class="keyword">function</span> <span class="variable">setStyleProperty</span>(<span class="variable">element</span>, <span class="variable">property</span>, <span class="variable">value</span>) {
    <span class="keyword">if</span> (<span class="variable">invalidCSSNode</span>(<span class="variable">element</span>)) {
      <span class="keyword">return</span>;
    }

    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">value</span> === <span class="string">'number'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; !<span class="variable">cssNumericalProperty</span>[<span class="variable">property</span>]) {
      <span class="variable">value</span> += <span class="string">'px'</span>;
    }

    <span class="variable">element</span>.<span class="variable">style</span>[<span class="variable">property</span>] = <span class="variable">value</span>;
  }

  <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">documentElement</span>.<span class="variable">currentStyle</span>) {
    <span class="variable">getStyle</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">currentStyle</span>[<span class="variable">camelCase</span>(<span class="variable">property</span>)];
    };

    <span class="variable">setStyle</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>, <span class="variable">value</span>) {
      <span class="keyword">return</span> <span class="variable">setStyleProperty</span>(<span class="variable">element</span>, <span class="variable">camelCase</span>(<span class="variable">property</span>), <span class="variable">value</span>);
    };
  } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">defaultView</span>.<span class="variable">getComputedStyle</span>) {
    <span class="variable">getStyle</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">ownerDocument</span>.<span class="variable">defaultView</span>.<span class="variable">getComputedStyle</span>(<span class="variable">element</span>, <span class="keyword">null</span>).<span class="variable">getPropertyValue</span>(<span class="variable">uncamel</span>(<span class="variable">property</span>));
    };

    <span class="variable">setStyle</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>, <span class="variable">value</span>) {
      <span class="keyword">return</span> <span class="variable">setStyleProperty</span>(<span class="variable">element</span>, <span class="variable">uncamel</span>(<span class="variable">property</span>), <span class="variable">value</span>);
    };
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Gets or sets style values.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element </p></li><li><p><strong>returns</strong>: <em>Object</em>  The style value</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">css</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">options</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">options</span> === <span class="string">'string'</span>) {
      <span class="keyword">return</span> <span class="variable">getStyle</span>(<span class="variable">element</span>, <span class="variable">options</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">property</span> <span class="keyword">in</span> <span class="variable">options</span>) {
        <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">hasOwnProperty</span>(<span class="variable">property</span>)) {
          <span class="variable">setStyle</span>(<span class="variable">element</span>, <span class="variable">property</span>, <span class="variable">options</span>[<span class="variable">property</span>]);
        }
      }
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Finds DOM elements based on a CSS selector.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  selector A CSS selector</p></li><li><p><strong>returns</strong>: <em>Array</em>  The elements</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">get</span> = <span class="keyword">function</span>(<span class="variable">selector</span>) {
    <span class="keyword">var</span> <span class="variable">root</span> = <span class="keyword">typeof</span> <span class="variable">arguments</span>[<span class="number integer">1</span>] === <span class="string">'undefined'</span> ? <span class="variable">document</span> : <span class="variable">arguments</span>[<span class="number integer">1</span>];
    <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">toArray</span>(<span class="variable">turing</span>.<span class="variable">detect</span>(<span class="string">'querySelectorAll'</span>) ?
      <span class="variable">root</span>.<span class="variable">querySelectorAll</span>(<span class="variable">selector</span>) : <span class="variable">get</span>(<span class="variable">selector</span>, <span class="variable">root</span>));
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Does an element satify a selector, based on root element?</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  selector A CSS selector</p></li><li><p><strong>param</strong>: <em>Object</em>  root The root DOM element</p></li><li><p><strong>returns</strong>: <em>Object</em>  The matching DOM element</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">findElement</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>, <span class="variable">root</span>) {
    <span class="keyword">var</span> <span class="variable">tokens</span> = <span class="variable">dom</span>.<span class="variable">tokenize</span>(<span class="variable">selector</span>).<span class="variable">tokens</span>,
        <span class="variable">searcher</span> = <span class="keyword">new</span> <span class="class">Searcher</span>(<span class="variable">root</span>, []);
    <span class="variable">searcher</span>.<span class="variable">tokens</span> = <span class="variable">tokens</span>;
    <span class="keyword">while</span> (<span class="variable">element</span>) {
      <span class="keyword">if</span> (<span class="variable">searcher</span>.<span class="variable">matchesAllRules</span>(<span class="variable">element</span>)) {
        <span class="keyword">return</span> <span class="variable">element</span>;
      }
      <span class="variable">element</span> = <span class="variable">element</span>.<span class="variable">parentNode</span>;
    }
  };

  <span class="keyword">function</span> <span class="variable">manipulateDOM</span>(<span class="variable">element</span>, <span class="variable">html</span>, <span class="variable">callback</span>) {
    <span class="keyword">var</span> <span class="variable">context</span> = <span class="variable">document</span>,
        <span class="variable">isTable</span> = <span class="variable">element</span>.<span class="variable">nodeName</span> === <span class="string">'TABLE'</span>,
        <span class="variable">shim</span>,
        <span class="variable">div</span>;

    <span class="variable">div</span> = <span class="variable">context</span>.<span class="variable">createElement</span>(<span class="string">'div'</span>);
    <span class="variable">div</span>.<span class="variable">innerHTML</span> = <span class="string">'&lt;'</span> + <span class="variable">element</span>.<span class="variable">nodeName</span> + <span class="string">'&gt;'</span> + <span class="variable">html</span> + <span class="string">'&lt;/'</span> + <span class="variable">element</span>.<span class="variable">nodeName</span> + <span class="string">'&gt;'</span>;
    <span class="variable">shim</span> = <span class="variable">isTable</span> ? <span class="variable">div</span>.<span class="variable">lastChild</span>.<span class="variable">lastChild</span> : <span class="variable">div</span>.<span class="variable">lastChild</span>;
    <span class="variable">callback</span>(<span class="variable">isTable</span> ? <span class="variable">element</span>.<span class="variable">lastChild</span> : <span class="variable">element</span>, <span class="variable">shim</span>);
    <span class="variable">div</span> = <span class="keyword">null</span>;
  };

  <span class="keyword">function</span> <span class="variable">getText</span>(<span class="variable">elements</span>) {
    <span class="keyword">var</span> <span class="variable">results</span> = <span class="string">''</span>, <span class="variable">element</span>, <span class="variable">i</span>;

    <span class="keyword">for</span> (<span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">elements</span>[<span class="variable">i</span>]; <span class="variable">i</span>++) {
      <span class="variable">element</span> = <span class="variable">elements</span>[<span class="variable">i</span>];
      <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">nodeType</span> === <span class="variable">nodeTypes</span>.<span class="class">TEXT_NODE</span> 
          || <span class="variable">element</span>.<span class="variable">nodeType</span> === <span class="variable">nodeTypes</span>.<span class="class">CDATA_SECTION_NODE</span>) {
        <span class="variable">results</span> += <span class="variable">element</span>.<span class="variable">nodeValue</span>;
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">nodeType</span> !== <span class="variable">nodeTypes</span>.<span class="class">COMMENT_NODE</span>) {
        <span class="variable">results</span> += <span class="variable">getText</span>(<span class="variable">element</span>.<span class="variable">childNodes</span>);
      }
    }

    <span class="keyword">return</span> <span class="variable">results</span>;
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Replaces the content of an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  html A string containing HTML</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">replace</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">html</span>) {
    <span class="variable">manipulateDOM</span>(<span class="variable">element</span>, <span class="variable">html</span>, <span class="keyword">function</span>(<span class="variable">insert</span>, <span class="variable">shim</span>) {
      <span class="variable">element</span>.<span class="variable">replaceChild</span>(<span class="variable">shim</span>, <span class="variable">insert</span>);
    });
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Appends an element to the end of an element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  html A string containing HTML</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">append</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">html</span>) {
    <span class="variable">manipulateDOM</span>(<span class="variable">element</span>, <span class="variable">html</span>, <span class="keyword">function</span>(<span class="variable">insertTo</span>, <span class="variable">shim</span>) {
      <span class="variable">insertTo</span>.<span class="variable">appendChild</span>(<span class="variable">shim</span>.<span class="variable">firstChild</span>);
    });
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Set or get innerHTML.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  html A string containing HTML</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">html</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">html</span>) {
    <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">1</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">innerHTML</span>;
    }

    <span class="keyword">try</span> {
      <span class="variable">element</span>.<span class="variable">innerHTML</span> = <span class="variable">html</span>;
    } <span class="keyword">catch</span> (<span class="variable">e</span>) {
      <span class="variable">dom</span>.<span class="variable">replace</span>(<span class="variable">element</span>, <span class="variable">html</span>);
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Set or get text nodes.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  text A string containing text</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">text</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">text</span>) {
    <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">1</span>) {
      <span class="keyword">return</span> <span class="variable">getText</span>(<span class="variable">element</span>);
    } <span class="keyword">else</span> {
      <span class="variable">dom</span>.<span class="variable">empty</span>(<span class="variable">element</span>);
      <span class="variable">element</span>.<span class="variable">appendChild</span>(<span class="variable">document</span>.<span class="variable">createTextNode</span>(<span class="variable">text</span>));
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Empty nodes.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">empty</span> = <span class="keyword">function</span>(<span class="variable">element</span>) {
    <span class="keyword">while</span> (<span class="variable">element</span>.<span class="variable">firstChild</span>) {
      <span class="variable">element</span>.<span class="variable">removeChild</span>(<span class="variable">element</span>.<span class="variable">firstChild</span>);
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Append CSS classes.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  className The class name</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">addClass</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">className</span>) {
    <span class="keyword">if</span> (!<span class="variable">className</span> || <span class="keyword">typeof</span> <span class="variable">className</span> !== <span class="string">'string'</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">nodeType</span> !== <span class="variable">nodeTypes</span>.<span class="class">ELEMENT_NODE</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">classList</span>) <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">classList</span>.<span class="variable">add</span>(<span class="variable">className</span>);

    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">className</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">className</span>.<span class="variable">length</span>) {
      <span class="keyword">if</span> (!<span class="variable">element</span>.<span class="variable">className</span>.<span class="variable">match</span>(<span class="string">'\\b'</span> + <span class="variable">className</span> + <span class="string">'\\b'</span>)) {
        <span class="variable">element</span>.<span class="variable">className</span> += <span class="string">' '</span> + <span class="variable">className</span>;
      }
    } <span class="keyword">else</span> {
      <span class="variable">element</span>.<span class="variable">className</span> = <span class="variable">className</span>;
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Remove CSS classes.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  className The class name</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">removeClass</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">className</span>) {
    <span class="keyword">if</span> (!<span class="variable">className</span> || <span class="keyword">typeof</span> <span class="variable">className</span> !== <span class="string">'string'</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">nodeType</span> !== <span class="variable">nodeTypes</span>.<span class="class">ELEMENT_NODE</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">classList</span>) <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">classList</span>.<span class="variable">remove</span>(<span class="variable">className</span>);

    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">className</span>) {
      <span class="variable">element</span>.<span class="variable">className</span> = <span class="variable">element</span>.<span class="variable">className</span>.
        <span class="variable">replace</span>(<span class="keyword">new</span> <span class="class">RegExp</span>(<span class="string">'\\s?\\b'</span> + <span class="variable">className</span> + <span class="string">'\\b'</span>), <span class="string">''</span>).
        <span class="variable">replace</span>(<span class="regexp">/^\s+/</span>, <span class="string">''</span>);
    }
  };

  <span class="variable">turing</span>.<span class="variable">addDetectionTest</span>(<span class="string">'getAttribute'</span>, <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">div</span> = <span class="variable">document</span>.<span class="variable">createElement</span>(<span class="string">'div'</span>);
    <span class="variable">div</span>.<span class="variable">innerHTML</span> = <span class="string">'&lt;a href=&quot;/example&quot;&gt;&lt;/a&gt;'</span>;

    <span class="keyword">if</span> (<span class="variable">div</span>.<span class="variable">childNodes</span>[<span class="number integer">0</span>].<span class="variable">getAttribute</span>(<span class="string">'href'</span>) === <span class="string">'/example'</span>) {
      <span class="keyword">return</span> <span class="variable">true</span>;
    }

    <span class="comment">// Helps IE release memory associated with the div</span>
    <span class="variable">div</span> = <span class="keyword">null</span>;
    <span class="keyword">return</span> <span class="variable">false</span>;
  });

  <span class="keyword">function</span> <span class="variable">getAttribute</span>(<span class="variable">element</span>, <span class="variable">name</span>) {
    <span class="keyword">if</span> (<span class="variable">propertyFix</span>[<span class="variable">name</span>]) {
      <span class="variable">name</span> = <span class="variable">propertyFix</span>[<span class="variable">name</span>];
    }

    <span class="keyword">if</span> (<span class="variable">getAttributeParamFix</span>[<span class="variable">name</span>]) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">getAttribute</span>(<span class="variable">name</span>, <span class="number integer">2</span>);
    }

    <span class="keyword">if</span> (<span class="variable">name</span> === <span class="string">'value'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">nodeName</span> === <span class="string">'BUTTON'</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">getAttributeNode</span>(<span class="variable">name</span>).<span class="variable">nodeValue</span>;
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">booleanAttributes</span>[<span class="variable">name</span>]) {
      <span class="keyword">return</span> <span class="variable">element</span>[<span class="variable">name</span>] ? <span class="variable">name</span> : <span class="variable">undefined</span>;
    }

    <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">getAttribute</span>(<span class="variable">name</span>);
  }

  <span class="keyword">function</span> <span class="variable">setAttribute</span>(<span class="variable">element</span>, <span class="variable">name</span>, <span class="variable">value</span>) {
    <span class="keyword">if</span> (<span class="variable">propertyFix</span>[<span class="variable">name</span>]) {
      <span class="variable">name</span> = <span class="variable">propertyFix</span>[<span class="variable">name</span>];
    }

    <span class="keyword">if</span> (<span class="variable">name</span> === <span class="string">'value'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">nodeName</span> === <span class="string">'BUTTON'</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">getAttributeNode</span>(<span class="variable">name</span>).<span class="variable">nodeValue</span> = <span class="variable">value</span>;
    }

    <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">setAttribute</span>(<span class="variable">name</span>, <span class="variable">value</span>);
  }

  <span class="keyword">function</span> <span class="variable">removeAttribute</span>(<span class="variable">element</span>, <span class="variable">name</span>) {
    <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">nodeType</span> !== <span class="variable">nodeTypes</span>.<span class="class">ELEMENT_NODE</span>) <span class="keyword">return</span>;
    <span class="keyword">if</span> (<span class="variable">propertyFix</span>[<span class="variable">name</span>]) <span class="variable">name</span> = <span class="variable">propertyFix</span>[<span class="variable">name</span>];
    <span class="variable">setAttribute</span>(<span class="variable">element</span>, <span class="variable">name</span>, <span class="string">''</span>);
    <span class="variable">element</span>.<span class="variable">removeAttributeNode</span>(<span class="variable">element</span>.<span class="variable">getAttributeNode</span>(<span class="variable">name</span>));
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Removes an attribute from a node.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  attribute The attribute name</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">removeAttr</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">attribute</span>) {
    <span class="variable">turing</span>.<span class="variable">detect</span>(<span class="string">'getAttribute'</span>) ?
      <span class="variable">element</span>.<span class="variable">removeAttribute</span>(<span class="variable">attribute</span>) : <span class="variable">removeAttribute</span>(<span class="variable">element</span>, <span class="variable">attribute</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set attributes.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  attribute The attribute name</p></li><li><p><strong>param</strong>: <em>String</em>  value The attribute value</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">attr</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">attribute</span>, <span class="variable">value</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">value</span> === <span class="string">'undefined'</span>) {
      <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">detect</span>(<span class="string">'getAttribute'</span>) ?
        <span class="variable">element</span>.<span class="variable">getAttribute</span>(<span class="variable">attribute</span>) : <span class="variable">getAttribute</span>(<span class="variable">element</span>, <span class="variable">attribute</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">if</span> (<span class="variable">value</span> === <span class="keyword">null</span>) {
        <span class="keyword">return</span> <span class="variable">dom</span>.<span class="variable">removeAttr</span>(<span class="variable">element</span>, <span class="variable">attribute</span>);
      } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">detect</span>(<span class="string">'getAttribute'</span>) ?
          <span class="variable">element</span>.<span class="variable">setAttribute</span>(<span class="variable">attribute</span>, <span class="variable">value</span>) : <span class="variable">setAttribute</span>(<span class="variable">element</span>, <span class="variable">attribute</span>, <span class="variable">value</span>);
      }
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set properties.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  attribute The property name</p></li><li><p><strong>param</strong>: <em>String | Number | Boolean</em>  value The property value</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">prop</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>, <span class="variable">value</span>) {
    <span class="keyword">if</span> (<span class="variable">propertyFix</span>[<span class="variable">property</span>])
      <span class="variable">property</span> = <span class="variable">propertyFix</span>[<span class="variable">property</span>];
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">value</span> === <span class="string">'undefined'</span>) {
      <span class="keyword">return</span> <span class="variable">element</span>[<span class="variable">property</span>];
    } <span class="keyword">else</span> {
      <span class="keyword">if</span> (<span class="variable">value</span> === <span class="keyword">null</span>) {
        <span class="keyword">return</span> <span class="variable">dom</span>.<span class="variable">removeProperty</span>(<span class="variable">element</span>, <span class="variable">property</span>);
      } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="variable">element</span>[<span class="variable">property</span>] = <span class="variable">value</span>;
      }
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Removes properties.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  attribute The property name</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">dom</span>.<span class="variable">removeProp</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">property</span>) {
    <span class="keyword">if</span> (<span class="variable">propertyFix</span>[<span class="variable">property</span>])
      <span class="variable">property</span> = <span class="variable">propertyFix</span>[<span class="variable">property</span>];
    <span class="keyword">try</span> {
      <span class="variable">element</span>[<span class="variable">property</span>] = <span class="variable">undefined</span>;
      <span class="keyword">delete</span> <span class="variable">element</span>[<span class="variable">property</span>];
    } <span class="keyword">catch</span> (<span class="variable">e</span>) {
    }
  };

  <span class="comment">// Chained API</span>
  <span class="variable">turing</span>.<span class="variable">init</span>(<span class="keyword">function</span>(<span class="variable">arg</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">arg</span> === <span class="string">'string'</span> || <span class="keyword">typeof</span> <span class="variable">arg</span> === <span class="string">'undefined'</span>) {
      <span class="comment">// CSS selector</span>
      <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">domChain</span>.<span class="variable">init</span>(<span class="variable">arg</span>);
    }
  });

  <span class="variable">turing</span>.<span class="variable">domChain</span> = {
    <span class="variable">init</span>: <span class="keyword">function</span>(<span class="variable">selector</span>) {
      <span class="this">this</span>.<span class="variable">selector</span> = <span class="variable">selector</span>;
      <span class="this">this</span>.<span class="variable">length</span> = <span class="number integer">0</span>;
      <span class="this">this</span>.<span class="variable">prevObject</span> = <span class="keyword">null</span>;
      <span class="this">this</span>.<span class="variable">elements</span> = [];

      <span class="keyword">if</span> (!<span class="variable">selector</span>) {
        <span class="keyword">return</span> <span class="this">this</span>;
      } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">find</span>(<span class="variable">selector</span>);
      }
    },

    <span class="variable">writeElements</span>: <span class="keyword">function</span>() {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="this">this</span>[<span class="variable">i</span>] = <span class="this">this</span>.<span class="variable">elements</span>[<span class="variable">i</span>];
      }
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p><code>first</code> will return a domChain with a length of 1 or 0.
      </p>
</td>
<td class="code">
<pre><code><span class="variable">first</span>: <span class="keyword">function</span>() {
      <span class="keyword">var</span> <span class="variable">elements</span> = [],
          <span class="variable">ret</span> = <span class="variable">turing</span>.<span class="variable">domChain</span>;
      <span class="variable">ret</span>.<span class="variable">elements</span> = <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> === <span class="number integer">0</span> ? [] : [<span class="this">this</span>.<span class="variable">elements</span>[<span class="number integer">0</span>]];
      <span class="variable">ret</span>.<span class="variable">selector</span> = <span class="this">this</span>.<span class="variable">selector</span>;
      <span class="variable">ret</span>.<span class="variable">length</span> = <span class="variable">ret</span>.<span class="variable">elements</span>.<span class="variable">length</span>;
      <span class="variable">ret</span>.<span class="variable">prevObject</span> = <span class="this">this</span>;
      <span class="variable">ret</span>.<span class="variable">writeElements</span>();
      <span class="keyword">return</span> <span class="variable">ret</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set innerHTML.  Applied to every element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  html A string containing HTML</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code> or the innerHTML</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">html</span>: <span class="keyword">function</span>(<span class="variable">html</span>) {
      <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">0</span>) {
        <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> === <span class="number integer">0</span> ? <span class="keyword">null</span> : <span class="variable">dom</span>.<span class="variable">html</span>(<span class="this">this</span>[<span class="number integer">0</span>]);
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
          <span class="variable">dom</span>.<span class="variable">html</span>(<span class="this">this</span>[<span class="variable">i</span>], <span class="variable">html</span>);
        }
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set text nodes.  Applied to every element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  text A string containing text to set</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code> or the text content</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">text</span>: <span class="keyword">function</span>(<span class="variable">text</span>) {
      <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">0</span>) {
        <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> === <span class="number integer">0</span> ? <span class="keyword">null</span> : <span class="variable">getText</span>(<span class="this">this</span>.<span class="variable">elements</span>);
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
          <span class="variable">dom</span>.<span class="variable">text</span>(<span class="this">this</span>.<span class="variable">elements</span>[<span class="variable">i</span>], <span class="variable">text</span>);
        }
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set styles.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Objects</em>  options Either options for a style to set or a property name</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code> or the style property</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">css</span>: <span class="keyword">function</span>(<span class="variable">options</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">options</span> === <span class="string">'string'</span>) {
        <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span> ? <span class="variable">getStyle</span>(<span class="this">this</span>.<span class="variable">elements</span>[<span class="number integer">0</span>], <span class="variable">options</span>) : <span class="keyword">null</span>;
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
          <span class="variable">dom</span>.<span class="variable">css</span>(<span class="this">this</span>[<span class="variable">i</span>], <span class="variable">options</span>);
        }
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Add class names.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  className A class name</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">addClass</span>: <span class="keyword">function</span>(<span class="variable">className</span>) {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="variable">dom</span>.<span class="variable">addClass</span>(<span class="this">this</span>[<span class="variable">i</span>], <span class="variable">className</span>);
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Remove class names.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  className A class name</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">removeClass</span>: <span class="keyword">function</span>(<span class="variable">className</span>) {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="variable">dom</span>.<span class="variable">removeClass</span>(<span class="this">this</span>[<span class="variable">i</span>], <span class="variable">className</span>);
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set an attribute.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  attribute The attribute name</p></li><li><p><strong>param</strong>: <em>String</em>  value The attribute value</p></li><li><p><strong>returns</strong>: <em>String</em>  The attribute value</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">attr</span>: <span class="keyword">function</span>(<span class="variable">attribute</span>, <span class="variable">value</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
        <span class="keyword">return</span> <span class="variable">dom</span>.<span class="variable">attr</span>(<span class="this">this</span>[<span class="number integer">0</span>], <span class="variable">attribute</span>, <span class="variable">value</span>);
      }
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Remove an attribute.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  attribute The attribute name</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">removeAttr</span>: <span class="keyword">function</span>(<span class="variable">attribute</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
        <span class="variable">dom</span>.<span class="variable">removeAttr</span>(<span class="this">this</span>[<span class="number integer">0</span>], <span class="variable">attribute</span>);
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Get or set a property.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  property The property name</p></li><li><p><strong>param</strong>: <em>String</em>  value The property value</p></li><li><p><strong>returns</strong>: <em>String</em>  The property value</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">prop</span>: <span class="keyword">function</span>(<span class="variable">property</span>, <span class="variable">value</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
        <span class="keyword">return</span> <span class="variable">dom</span>.<span class="variable">prop</span>(<span class="this">this</span>[<span class="number integer">0</span>], <span class="variable">property</span>, <span class="variable">value</span>);
      }
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Removes properties.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  attribute The property name</p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">removeProp</span>: <span class="keyword">function</span>(<span class="variable">property</span>) {
      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
        <span class="keyword">return</span> <span class="variable">dom</span>.<span class="variable">removeProp</span>(<span class="this">this</span>[<span class="number integer">0</span>], <span class="variable">property</span>, <span class="variable">value</span>);
      }
    },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Append HTML to an element.  Applied to every element.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  html A string containing HTML</p></li><li><p><strong>returns</strong>: <em>Object</em>  <code>this</code></p><p> </p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">append</span>: <span class="keyword">function</span>(<span class="variable">html</span>) {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">elements</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="variable">dom</span>.<span class="variable">append</span>(<span class="this">this</span>[<span class="variable">i</span>], <span class="variable">html</span>);
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    },

    <span class="variable">find</span>: <span class="keyword">function</span>(<span class="variable">selector</span>) {
      <span class="keyword">var</span> <span class="variable">elements</span> = [],
          <span class="variable">ret</span> = <span class="variable">turing</span>.<span class="variable">domChain</span>,
          <span class="variable">root</span> = <span class="variable">document</span>;

      <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">prevObject</span>) {
        <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">prevObject</span>.<span class="variable">elements</span>.<span class="variable">length</span> &<span class="variable">gt</span>; <span class="number integer">0</span>) {
          <span class="variable">root</span> = <span class="this">this</span>.<span class="variable">prevObject</span>.<span class="variable">elements</span>[<span class="number integer">0</span>];
        } <span class="keyword">else</span> {
          <span class="variable">root</span> = <span class="keyword">null</span>;
        }
      }

      <span class="variable">elements</span> = <span class="variable">dom</span>.<span class="variable">get</span>(<span class="variable">selector</span>, <span class="variable">root</span>);
      <span class="this">this</span>.<span class="variable">elements</span> = <span class="variable">elements</span>;
      <span class="variable">ret</span>.<span class="variable">elements</span> = <span class="variable">elements</span>;
      <span class="variable">ret</span>.<span class="variable">selector</span> = <span class="variable">selector</span>;
      <span class="variable">ret</span>.<span class="variable">length</span> = <span class="variable">elements</span>.<span class="variable">length</span>;
      <span class="variable">ret</span>.<span class="variable">prevObject</span> = <span class="this">this</span>;
      <span class="variable">ret</span>.<span class="variable">writeElements</span>();
      <span class="keyword">return</span> <span class="variable">ret</span>;
    }
  };

  <span class="variable">turing</span>.<span class="variable">domChain</span>.<span class="variable">init</span>.<span class="variable">prototype</span> = <span class="variable">turing</span>.<span class="variable">domChain</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Enumerable methods can be chained with DOM calls:</p>

<pre><code>  turing('p').each(function(element) {
    console.log(element);
  });

</code></pre>
</td>
<td class="code">
<pre><code><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">turing</span>.<span class="variable">enumerable</span> !== <span class="string">'undefined'</span>) {
    <span class="variable">turing</span>.<span class="variable">domChain</span>[<span class="string">'values'</span>] = <span class="keyword">function</span>() {
      <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">elements</span>;
    };

    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">turing</span>.<span class="variable">chainableMethods</span>, <span class="keyword">function</span>(<span class="variable">methodName</span>) {
      <span class="variable">turing</span>.<span class="variable">domChain</span>[<span class="variable">methodName</span>] = <span class="keyword">function</span>(<span class="variable">fn</span>) {
        <span class="keyword">var</span> <span class="variable">elements</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>[<span class="variable">methodName</span>](<span class="this">this</span>, <span class="variable">fn</span>),
            <span class="variable">ret</span> = <span class="variable">turing</span>.<span class="variable">domChain</span>;
        <span class="this">this</span>.<span class="variable">elements</span> = <span class="variable">elements</span>;
        <span class="variable">ret</span>.<span class="variable">elements</span> = <span class="variable">elements</span>;
        <span class="variable">ret</span>.<span class="variable">selector</span> = <span class="this">this</span>.<span class="variable">selector</span>;
        <span class="variable">ret</span>.<span class="variable">length</span> = <span class="variable">elements</span>.<span class="variable">length</span>;
        <span class="variable">ret</span>.<span class="variable">prevObject</span> = <span class="this">this</span>;
        <span class="variable">ret</span>.<span class="variable">writeElements</span>();
        <span class="keyword">return</span> <span class="variable">ret</span>;
      };
    });
  }

  <span class="variable">dom</span>.<span class="variable">nodeTypes</span> = <span class="variable">nodeTypes</span>;
  <span class="variable">turing</span>.<span class="variable">dom</span> = <span class="variable">dom</span>;
})();

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.enumerable.js"><a href="#">turing.enumerable</a></h2></td><td>turing.enumerable.js</td></tr><tr class="code">
<td class="docs">
<p>The Turing Enumerable module.</p>

<p>This is bound to DOM objects:</p>

<pre><code>turing('p').each(function() {
  // `this` contains a DOM element
});</code></pre>

<p> </p>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">enumerable</span> = {</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Throw to break out of iterators.
   </p>
</td>
<td class="code">
<pre><code><span class="class">Break</span>: {},</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Iterates using a function over a set of items.  Example:</p>

<pre><code> turing.enumerable.each([1, 2, 3], function(n) {
   console.log(n);
 });</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback The function to run</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Object</em>  The passed in enumerable object</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">each</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="keyword">try</span> {
      <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">forEach</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">forEach</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">forEach</span>) {
        <span class="variable">enumerable</span>.<span class="variable">forEach</span>(<span class="variable">callback</span>, <span class="variable">context</span>);
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">turing</span>.<span class="variable">isNumber</span>(<span class="variable">enumerable</span>.<span class="variable">length</span>)) {
        <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">l</span> = <span class="variable">enumerable</span>.<span class="variable">length</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">l</span>; <span class="variable">i</span>++) <span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">enumerable</span>, <span class="variable">enumerable</span>[<span class="variable">i</span>], <span class="variable">i</span>, <span class="variable">enumerable</span>);
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">key</span> <span class="keyword">in</span> <span class="variable">enumerable</span>) {
          <span class="keyword">if</span> (<span class="variable">hasOwnProperty</span>.<span class="variable">call</span>(<span class="variable">enumerable</span>, <span class="variable">key</span>)) <span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">enumerable</span>[<span class="variable">key</span>], <span class="variable">key</span>, <span class="variable">enumerable</span>);
        }
      }
    } <span class="keyword">catch</span>(<span class="variable">e</span>) {
      <span class="keyword">if</span> (<span class="variable">e</span> != <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Break</span>) <span class="keyword">throw</span> <span class="variable">e</span>;
    }

    <span class="keyword">return</span> <span class="variable">enumerable</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Changes a set of item using a function. Example:</p>

<pre><code> turing.enumerable.map([1, 2, 3], function(n) {
   return n + 1;
 });</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback The function to run over each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Array</em>  The changed items</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">map</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">map</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">map</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">map</span>) <span class="keyword">return</span> <span class="variable">enumerable</span>.<span class="variable">map</span>(<span class="variable">callback</span>, <span class="variable">context</span>);
    <span class="keyword">var</span> <span class="variable">results</span> = [];
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>) {
      <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>));
    });
    <span class="keyword">return</span> <span class="variable">results</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Removes items based on a callback.  For example:</p>

<pre><code> var a = [1, 2, 3, 4, 5, 6, 7, 8];
 turing.enumerable.filter(a, function(n) {
   return n % 2 === 0;
 });

 =&gt; [2, 4, 6, 8]</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback The function to run over each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Array</em>  The filtered items</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">filter</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">filter</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">filter</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">filter</span>)
      <span class="keyword">return</span> <span class="variable">enumerable</span>.<span class="variable">filter</span>(<span class="variable">callback</span>, <span class="variable">context</span>);
    <span class="keyword">var</span> <span class="variable">results</span>   = [],
        <span class="variable">pushIndex</span> = !<span class="variable">turing</span>.<span class="variable">isArray</span>(<span class="variable">enumerable</span>);
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>) {
      <span class="keyword">if</span> (<span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>)) {
        <span class="keyword">if</span> (<span class="variable">pushIndex</span>) {
          <span class="variable">results</span>.<span class="variable">push</span>([<span class="variable">index</span>, <span class="variable">value</span>]);
        } <span class="keyword">else</span> {
          <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">value</span>);
        }
      }
    });
    <span class="keyword">return</span> <span class="variable">results</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>The opposite of filter.  For example:</p>

<pre><code> var a = [1, 2, 3, 4, 5, 6, 7, 8];
 turing.enumerable.reject(a, function(n) {
   return n % 2 === 0;
 });

 =&gt; [1, 3, 5, 7]</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback The function to run over each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Array</em>  The rejected items</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">reject</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">filter</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>() {
      <span class="keyword">return</span> !<span class="variable">callback</span>.<span class="variable">apply</span>(<span class="variable">context</span>, <span class="variable">arguments</span>);
    }, <span class="variable">context</span>);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Find a single item.  For example:</p>

<pre><code> var a = [1, 2, 3, 4, 5, 6, 7, 8];
 turing.enumerable.detect(a, function(n) {
   return n === 3;
 });

 =&gt; 3</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback The function to run over each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Object</em>  The item, if found</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">detect</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="keyword">var</span> <span class="variable">result</span>;
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>) {
      <span class="keyword">if</span> (<span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>)) {
        <span class="variable">result</span> = <span class="variable">value</span>;
        <span class="keyword">throw</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Break</span>;
      }
    });
    <span class="keyword">return</span> <span class="variable">result</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Runs a function over each item, collecting the results:</p>

<pre><code> var a = [1, 2, 3, 4, 5, 6, 7, 8];
 turing.enumerable.reduce(a, 0, function(memo, n) {
   return memo + n;
 });

 =&gt; 36</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Object</em>  memo The initial accumulator value</p></li><li><p><strong>param</strong>: <em>Function</em>  callback The function to run over each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Object</em>  The accumulated results</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">reduce</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">memo</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">reduce</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">reduce</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">reduce</span>)
      <span class="keyword">return</span> <span class="variable">enumerable</span>.<span class="variable">reduce</span>(<span class="variable">turing</span>.<span class="variable">bind</span>(<span class="variable">callback</span>, <span class="variable">context</span>), <span class="variable">memo</span>);
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>) {
      <span class="variable">memo</span> = <span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">memo</span>, <span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>);
    });
    <span class="keyword">return</span> <span class="variable">memo</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Flattens multidimensional arrays:</p>

<pre><code> turing.enumerable.flatten([[2, 4], [[6], 8]]);

 =&gt; [2, 4, 6, 8]</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>returns</strong>: <em>Object</em>  The flat array</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">flatten</span>: <span class="keyword">function</span>(<span class="variable">array</span>) {
    <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">reduce</span>(<span class="variable">array</span>, [], <span class="keyword">function</span>(<span class="variable">memo</span>, <span class="variable">value</span>) {
      <span class="keyword">if</span> (<span class="variable">turing</span>.<span class="variable">isArray</span>(<span class="variable">value</span>)) <span class="keyword">return</span> <span class="variable">memo</span>.<span class="variable">concat</span>(<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">flatten</span>(<span class="variable">value</span>));
      <span class="variable">memo</span>.<span class="variable">push</span>(<span class="variable">value</span>);
      <span class="keyword">return</span> <span class="variable">memo</span>;
    });
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Return the last items from a list:</p>

<pre><code> turing.enumerable.tail([1, 2, 3, 4, 5], 3);

 =&gt; [4, 5]</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Number</em>  start The index of the item to 'cut' the array</p></li><li><p><strong>returns</strong>: <em>Object</em>  A list of items</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">tail</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">start</span>) {
    <span class="variable">start</span> = <span class="keyword">typeof</span> <span class="variable">start</span> === <span class="string">'undefined'</span> ? <span class="number integer">1</span> : <span class="variable">start</span>;
    <span class="keyword">return</span> <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">slice</span>.<span class="variable">apply</span>(<span class="variable">enumerable</span>, [<span class="variable">start</span>]);
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Invokes <code>method</code> on a list of items:</p>

<pre><code> turing.enumerable.invoke(['hello', 'world'], 'substring', 0, 3);

 =&gt; ['hel', 'wor']</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  method The method to invoke on each item</p></li><li><p><strong>returns</strong>: <em>Object</em>  The changed list</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">invoke</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">method</span>) {
    <span class="keyword">var</span> <span class="variable">args</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">tail</span>(<span class="variable">arguments</span>, <span class="number integer">2</span>); 
    <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">map</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>) {
      <span class="keyword">return</span> (<span class="variable">method</span> ? <span class="variable">value</span>[<span class="variable">method</span>] : <span class="variable">value</span>).<span class="variable">apply</span>(<span class="variable">value</span>, <span class="variable">args</span>);
    });
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Pluck a property from each item of a list:</p>

<pre><code> turing.enumerable.pluck(['hello', 'world'], 'length');

 =&gt; [5, 5]</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>String</em>  key The property to pluck</p></li><li><p><strong>returns</strong>: <em>Object</em>  The plucked properties</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">pluck</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">key</span>) {
    <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">map</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>) {
      <span class="keyword">return</span> <span class="variable">value</span>[<span class="variable">key</span>];
    });
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Determines if a list matches some items based on a callback:</p>

<pre><code> turing.enumerable.some([1, 2, 3], function(value) {
   return value === 3;
 });

 =&gt; true</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback A function to run against each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  True if an item was matched</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">some</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="variable">callback</span> = <span class="variable">callback</span> || <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">identity</span>;
    <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">some</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">some</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">some</span>)
      <span class="keyword">return</span> <span class="variable">enumerable</span>.<span class="variable">some</span>(<span class="variable">callback</span>, <span class="variable">context</span>);
    <span class="keyword">var</span> <span class="variable">result</span> = <span class="variable">false</span>;
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>) {
      <span class="keyword">if</span> (<span class="variable">result</span> = <span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>)) {
        <span class="keyword">throw</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Break</span>;
      }
    });
    <span class="keyword">return</span> <span class="variable">result</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Checks if all items match the callback:</p>

<pre><code> turing.enumerable.all([1, 2, 3], function(value) {
   return value &lt; 4;
 })

 =&gt; true</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Function</em>  callback A function to run against each item</p></li><li><p><strong>param</strong>: <em>Object</em>  [context] An optional parameter to determine <code>this</code> in the callback</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  True if all items match</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">all</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">callback</span>, <span class="variable">context</span>) {
    <span class="variable">callback</span> = <span class="variable">callback</span> || <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">identity</span>;
    <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">every</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">every</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">every</span>)
      <span class="keyword">return</span> <span class="variable">enumerable</span>.<span class="variable">every</span>(<span class="variable">callback</span>, <span class="variable">context</span>);
    <span class="keyword">var</span> <span class="variable">result</span> = <span class="variable">true</span>;
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>) {
      <span class="keyword">if</span> (!(<span class="variable">result</span> = <span class="variable">result</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">callback</span>.<span class="variable">call</span>(<span class="variable">context</span>, <span class="variable">value</span>, <span class="variable">index</span>, <span class="variable">list</span>))) {
        <span class="keyword">throw</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Break</span>;
      }
    });
    <span class="keyword">return</span> <span class="variable">result</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Checks if one item matches a value:</p>

<pre><code> turing.enumerable.include([1, 2, 3], 3);

 =&gt; true</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>param</strong>: <em>Object</em>  target A value to find</p></li><li><p><strong>returns</strong>: <em>Boolean</em>  True if an item was found</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">include</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>, <span class="variable">target</span>) {
    <span class="keyword">if</span> (<span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">indexOf</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">enumerable</span>.<span class="variable">indexOf</span> === <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">indexOf</span>)
      <span class="keyword">return</span> <span class="variable">enumerable</span>.<span class="variable">indexOf</span>(<span class="variable">target</span>) != -<span class="number integer">1</span>;
    <span class="keyword">var</span> <span class="variable">found</span> = <span class="variable">false</span>;
    <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">enumerable</span>, <span class="keyword">function</span>(<span class="variable">value</span>, <span class="variable">key</span>) {
      <span class="keyword">if</span> (<span class="variable">found</span> = <span class="variable">value</span> === <span class="variable">target</span>) {
        <span class="keyword">throw</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Break</span>;
      }
    });
    <span class="keyword">return</span> <span class="variable">found</span>;
  },</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Chain enumerable calls:</p>

<pre><code> turing.enumerable.chain([1, 2, 3, 4])
   .filter(function(n) { return n % 2 == 0; })
   .map(function(n) { return n * 10; })
   .values();

 =&gt; [20, 40]</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  enumerable A set of items that responds to <code>length</code></p></li><li><p><strong>returns</strong>: <em>Object</em>  The chained enumerable API</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">chain</span>: <span class="keyword">function</span>(<span class="variable">enumerable</span>) {
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Chainer</span>(<span class="variable">enumerable</span>);
  },

  <span class="variable">identity</span>: <span class="keyword">function</span>(<span class="variable">value</span>) {
    <span class="keyword">return</span> <span class="variable">value</span>;
  }
};

<span class="comment">// Aliases</span>
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">select</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">filter</span>;
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">collect</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">map</span>;
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">inject</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">reduce</span>;
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">rest</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">tail</span>;
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">any</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">some</span>;
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">every</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">all</span>;
<span class="variable">turing</span>.<span class="variable">chainableMethods</span> = [<span class="string">'map'</span>, <span class="string">'collect'</span>, <span class="string">'detect'</span>, <span class="string">'filter'</span>, <span class="string">'reduce'</span>, <span class="string">'each'</span>,
                           <span class="string">'tail'</span>, <span class="string">'rest'</span>, <span class="string">'reject'</span>, <span class="string">'pluck'</span>, <span class="string">'any'</span>, <span class="string">'some'</span>, <span class="string">'all'</span>];

<span class="comment">// Chainer class</span>
<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Chainer</span> = <span class="keyword">function</span>(<span class="variable">values</span>) {
  <span class="this">this</span>.<span class="variable">results</span> = <span class="variable">values</span>;
};

<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Chainer</span>.<span class="variable">prototype</span>.<span class="variable">values</span> = <span class="keyword">function</span>() {
  <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">results</span>;
};

<span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">each</span>(<span class="variable">turing</span>.<span class="variable">chainableMethods</span>, <span class="keyword">function</span>(<span class="variable">methodName</span>) {
  <span class="keyword">var</span> <span class="variable">method</span> = <span class="variable">turing</span>.<span class="variable">enumerable</span>[<span class="variable">methodName</span>];
  <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="class">Chainer</span>.<span class="variable">prototype</span>[<span class="variable">methodName</span>] = <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">args</span> = <span class="class">Array</span>.<span class="variable">prototype</span>.<span class="variable">slice</span>.<span class="variable">call</span>(<span class="variable">arguments</span>);
    <span class="variable">args</span>.<span class="variable">unshift</span>(<span class="this">this</span>.<span class="variable">results</span>);
    <span class="this">this</span>.<span class="variable">results</span> = <span class="variable">method</span>.<span class="variable">apply</span>(<span class="this">this</span>, <span class="variable">args</span>);
    <span class="keyword">return</span> <span class="this">this</span>;
  }
});

<span class="variable">turing</span>.<span class="variable">init</span>(<span class="keyword">function</span>(<span class="variable">arg</span>) {
  <span class="keyword">if</span> (<span class="variable">arg</span>.<span class="variable">hasOwnProperty</span>.<span class="variable">length</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="keyword">typeof</span> <span class="variable">arg</span> !== <span class="string">'string'</span>) {
    <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">enumerable</span>.<span class="variable">chain</span>(<span class="variable">arg</span>);
  }
});

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.events.js"><a href="#">turing.events</a></h2></td><td>turing.events.js</td></tr><tr class="code">
<td class="docs">
<p>The Turing Events module.</p>

<p> </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>() {
  <span class="keyword">var</span> <span class="variable">events</span> = {}, <span class="variable">cache</span> = [], <span class="variable">onReadyBound</span> = <span class="variable">false</span>, <span class="variable">isReady</span> = <span class="variable">false</span>, <span class="class">DOMContentLoaded</span>, <span class="variable">readyCallbacks</span> = [];

  <span class="keyword">function</span> <span class="variable">isValidElement</span>(<span class="variable">element</span>) {
    <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">nodeType</span> !== <span class="number integer">3</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">nodeType</span> !== <span class="number integer">8</span>;
  }

  <span class="keyword">function</span> <span class="variable">stop</span>(<span class="variable">event</span>) {
    <span class="variable">event</span>.<span class="variable">preventDefault</span>(<span class="variable">event</span>);
    <span class="variable">event</span>.<span class="variable">stopPropagation</span>(<span class="variable">event</span>);
  }

  <span class="keyword">function</span> <span class="variable">fix</span>(<span class="variable">event</span>, <span class="variable">element</span>) {
    <span class="keyword">if</span> (!<span class="variable">event</span>) <span class="keyword">var</span> <span class="variable">event</span> = <span class="variable">window</span>.<span class="variable">event</span>;

    <span class="variable">event</span>.<span class="variable">stop</span> = <span class="keyword">function</span>() { <span class="variable">stop</span>(<span class="variable">event</span>); };

    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">event</span>.<span class="variable">target</span> === <span class="string">'undefined'</span>)
      <span class="variable">event</span>.<span class="variable">target</span> = <span class="variable">event</span>.<span class="variable">srcElement</span> || <span class="variable">element</span>;

    <span class="keyword">if</span> (!<span class="variable">event</span>.<span class="variable">preventDefault</span>)
      <span class="variable">event</span>.<span class="variable">preventDefault</span> = <span class="keyword">function</span>() { <span class="variable">event</span>.<span class="variable">returnValue</span> = <span class="variable">false</span>; };

    <span class="keyword">if</span> (!<span class="variable">event</span>.<span class="variable">stopPropagation</span>)
      <span class="variable">event</span>.<span class="variable">stopPropagation</span> = <span class="keyword">function</span>() { <span class="variable">event</span>.<span class="variable">cancelBubble</span> = <span class="variable">true</span>; };

    <span class="keyword">if</span> (<span class="variable">event</span>.<span class="variable">target</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">event</span>.<span class="variable">target</span>.<span class="variable">nodeType</span> === <span class="number integer">3</span>)
      <span class="variable">event</span>.<span class="variable">target</span> = <span class="variable">event</span>.<span class="variable">target</span>.<span class="variable">parentNode</span>;

    <span class="keyword">if</span> (<span class="variable">event</span>.<span class="variable">pageX</span> == <span class="keyword">null</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">event</span>.<span class="variable">clientX</span> != <span class="keyword">null</span>) {
      <span class="keyword">var</span> <span class="variable">doc</span> = <span class="variable">document</span>.<span class="variable">documentElement</span>, <span class="variable">body</span> = <span class="variable">document</span>.<span class="variable">body</span>;
      <span class="variable">event</span>.<span class="variable">pageX</span> = <span class="variable">event</span>.<span class="variable">clientX</span> + (<span class="variable">doc</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">doc</span>.<span class="variable">scrollLeft</span> || <span class="variable">body</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">body</span>.<span class="variable">scrollLeft</span> || <span class="number integer">0</span>) - (<span class="variable">doc</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">doc</span>.<span class="variable">clientLeft</span> || <span class="variable">body</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">body</span>.<span class="variable">clientLeft</span> || <span class="number integer">0</span>);
      <span class="variable">event</span>.<span class="variable">pageY</span> = <span class="variable">event</span>.<span class="variable">clientY</span> + (<span class="variable">doc</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">doc</span>.<span class="variable">scrollTop</span> || <span class="variable">body</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">body</span>.<span class="variable">scrollTop</span> || <span class="number integer">0</span>) - (<span class="variable">doc</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">doc</span>.<span class="variable">clientTop</span> || <span class="variable">body</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">body</span>.<span class="variable">clientTop</span> || <span class="number integer">0</span>);
    }

    <span class="keyword">return</span> <span class="variable">event</span>;
  }

  <span class="keyword">function</span> <span class="variable">createResponder</span>(<span class="variable">element</span>, <span class="variable">handler</span>) {
    <span class="keyword">return</span> <span class="keyword">function</span>(<span class="variable">event</span>) {
      <span class="variable">fix</span>(<span class="variable">event</span>, <span class="variable">element</span>);
      <span class="keyword">return</span> <span class="variable">handler</span>(<span class="variable">event</span>);
    };
  }

  <span class="keyword">function</span> <span class="variable">removeCachedResponder</span>(<span class="variable">element</span>, <span class="variable">type</span>, <span class="variable">handler</span>) {
    <span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>, <span class="variable">responder</span>, <span class="variable">j</span> = <span class="number integer">0</span>;
    <span class="keyword">for</span> (<span class="variable">j</span> = <span class="number integer">0</span>; <span class="variable">j</span> &<span class="variable">lt</span>; <span class="variable">cache</span>.<span class="variable">length</span>; <span class="variable">j</span>++) {
      <span class="keyword">if</span> (<span class="variable">cache</span>[<span class="variable">j</span>].<span class="variable">element</span> !== <span class="variable">element</span>
          &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">cache</span>[<span class="variable">j</span>].<span class="variable">type</span> !== <span class="variable">type</span>
          &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">cache</span>[<span class="variable">j</span>].<span class="variable">handler</span> !== <span class="variable">handler</span>) {
        <span class="variable">cache</span>[<span class="variable">i</span>++] = <span class="variable">cache</span>[<span class="variable">j</span>];
      } <span class="keyword">else</span> {
        <span class="variable">responder</span> = <span class="variable">cache</span>[<span class="variable">j</span>].<span class="variable">responder</span>;
      }
    }
    <span class="variable">cache</span>.<span class="variable">length</span> = <span class="variable">i</span>;
    <span class="keyword">return</span> <span class="variable">responder</span>;
  }

  <span class="keyword">function</span> <span class="variable">ready</span>() {
    <span class="keyword">if</span> (!<span class="variable">isReady</span>) {
      <span class="comment">// Make sure body exists</span>
      <span class="keyword">if</span> (!<span class="variable">document</span>.<span class="variable">body</span>) {
        <span class="keyword">return</span> <span class="variable">setTimeout</span>(<span class="variable">ready</span>, <span class="number integer">13</span>);
      }

      <span class="variable">isReady</span> = <span class="variable">true</span>;

      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="variable">readyCallbacks</span>) {
        <span class="variable">readyCallbacks</span>[<span class="variable">i</span>]();
      }

      <span class="variable">readyCallbacks</span> = <span class="keyword">null</span>;

      <span class="comment">// TODO:</span>
      <span class="comment">// When custom events work properly in IE:</span>
      <span class="comment">// events.fire(document, 'dom:ready');</span>
    }
  }

  <span class="comment">// This checks if the DOM is ready recursively</span>
  <span class="keyword">function</span> <span class="class">DOMReadyScrollCheck</span>() {
    <span class="keyword">if</span> (<span class="variable">isReady</span>) {
      <span class="keyword">return</span>;
    }

    <span class="keyword">try</span> {
      <span class="variable">document</span>.<span class="variable">documentElement</span>.<span class="variable">doScroll</span>(<span class="string">'left'</span>);
    } <span class="keyword">catch</span>(<span class="variable">e</span>) {
      <span class="variable">setTimeout</span>(<span class="class">DOMReadyScrollCheck</span>, <span class="number integer">1</span>);
      <span class="keyword">return</span>;
    }

    <span class="variable">ready</span>();
  }

  <span class="comment">// DOMContentLoaded cleans up listeners</span>
  <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">addEventListener</span>) {
    <span class="class">DOMContentLoaded</span> = <span class="keyword">function</span>() {
      <span class="variable">document</span>.<span class="variable">removeEventListener</span>(<span class="string">'DOMContentLoaded'</span>, <span class="class">DOMContentLoaded</span>, <span class="variable">false</span>);
      <span class="variable">ready</span>();
    };
  } <span class="keyword">else</span> <span class="keyword">if</span> ( <span class="variable">document</span>.<span class="variable">attachEvent</span> ) {
    <span class="class">DOMContentLoaded</span> = <span class="keyword">function</span>() {
      <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">readyState</span> === <span class="string">'complete'</span>) {
        <span class="variable">document</span>.<span class="variable">detachEvent</span>(<span class="string">'onreadystatechange'</span>, <span class="class">DOMContentLoaded</span>);
        <span class="variable">ready</span>();
      }
    };
  }

  <span class="keyword">function</span> <span class="variable">bindOnReady</span>() {
    <span class="keyword">if</span> (<span class="variable">onReadyBound</span>) <span class="keyword">return</span>;
    <span class="variable">onReadyBound</span> = <span class="variable">true</span>;

    <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">readyState</span> === <span class="string">'complete'</span>) {
      <span class="variable">ready</span>();
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">addEventListener</span>) {
      <span class="variable">document</span>.<span class="variable">addEventListener</span>(<span class="string">'DOMContentLoaded'</span>, <span class="class">DOMContentLoaded</span>, <span class="variable">false</span> );
      <span class="variable">window</span>.<span class="variable">addEventListener</span>(<span class="string">'load'</span>, <span class="variable">ready</span>, <span class="variable">false</span>);
    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">attachEvent</span>) {
      <span class="variable">document</span>.<span class="variable">attachEvent</span>(<span class="string">'onreadystatechange'</span>, <span class="class">DOMContentLoaded</span>);

      <span class="variable">window</span>.<span class="variable">attachEvent</span>(<span class="string">'onload'</span>, <span class="variable">ready</span>);

      <span class="comment">// Check to see if the document is ready</span>
      <span class="keyword">var</span> <span class="variable">toplevel</span> = <span class="variable">false</span>;
      <span class="keyword">try</span> {
        <span class="variable">toplevel</span> = <span class="variable">window</span>.<span class="variable">frameElement</span> == <span class="keyword">null</span>;
      } <span class="keyword">catch</span>(<span class="variable">e</span>) {}

      <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">documentElement</span>.<span class="variable">doScroll</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">toplevel</span>) {
        <span class="class">DOMReadyScrollCheck</span>();
      }
    }
  }

  <span class="keyword">function</span> <span class="class">IEType</span>(<span class="variable">type</span>) {
    <span class="keyword">if</span> (<span class="variable">type</span>.<span class="variable">match</span>(<span class="regexp">/:/</span>)) {
      <span class="keyword">return</span> <span class="variable">type</span>;
    }
    <span class="keyword">return</span> <span class="string">'on'</span> + <span class="variable">type</span>;
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Bind an event to an element.</p>

<pre><code> turing.events.add(element, 'click', function() {
   console.log('Clicked');
 });</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  type The event name</p></li><li><p><strong>param</strong>: <em>Function</em>  handler The event handler</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">events</span>.<span class="variable">add</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">type</span>, <span class="variable">handler</span>) {
    <span class="keyword">if</span> (!<span class="variable">isValidElement</span>(<span class="variable">element</span>)) <span class="keyword">return</span>;

    <span class="keyword">var</span> <span class="variable">responder</span> = <span class="variable">createResponder</span>(<span class="variable">element</span>, <span class="variable">handler</span>);
    <span class="variable">cache</span>.<span class="variable">push</span>({ <span class="variable">element</span>: <span class="variable">element</span>, <span class="variable">type</span>: <span class="variable">type</span>, <span class="variable">handler</span>: <span class="variable">handler</span>, <span class="variable">responder</span>: <span class="variable">responder</span> });

    <span class="keyword">if</span> (<span class="variable">type</span>.<span class="variable">match</span>(<span class="regexp">/:/</span>) &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">element</span>.<span class="variable">attachEvent</span>) {
      <span class="variable">element</span>.<span class="variable">attachEvent</span>(<span class="string">'ondataavailable'</span>, <span class="variable">responder</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">addEventListener</span>) {
        <span class="variable">element</span>.<span class="variable">addEventListener</span>(<span class="variable">type</span>, <span class="variable">responder</span>, <span class="variable">false</span>);
      } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">element</span>.<span class="variable">attachEvent</span>) {
        <span class="variable">element</span>.<span class="variable">attachEvent</span>(<span class="class">IEType</span>(<span class="variable">type</span>), <span class="variable">responder</span>);
      }
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Remove an event from an element.</p>

<pre><code> turing.events.add(element, 'click', callback);</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  type The event name</p></li><li><p><strong>param</strong>: <em>Function</em>  handler The event handler</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">events</span>.<span class="variable">remove</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">type</span>, <span class="variable">handler</span>) {
    <span class="keyword">if</span> (!<span class="variable">isValidElement</span>(<span class="variable">element</span>)) <span class="keyword">return</span>;
    <span class="keyword">var</span> <span class="variable">responder</span> = <span class="variable">removeCachedResponder</span>(<span class="variable">element</span>, <span class="variable">type</span>, <span class="variable">handler</span>);

    <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">removeEventListener</span>) {
      <span class="variable">element</span>.<span class="variable">removeEventListener</span>(<span class="variable">type</span>, <span class="variable">responder</span>, <span class="variable">false</span>);
    } <span class="keyword">else</span> {
      <span class="variable">element</span>.<span class="variable">detachEvent</span>(<span class="class">IEType</span>(<span class="variable">type</span>), <span class="variable">responder</span>);
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Fires an event.</p>

<pre><code> turing.events.fire(element, 'click');</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  element A DOM element</p></li><li><p><strong>param</strong>: <em>String</em>  type The event name</p></li><li><p><strong>returns</strong>: <em>Object</em>  The browser's <code>fireEvent</code> or <code>dispatchEvent</code> result</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">events</span>.<span class="variable">fire</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">type</span>) {
    <span class="keyword">var</span> <span class="variable">event</span>;
    <span class="keyword">if</span> (<span class="variable">document</span>.<span class="variable">createEventObject</span>) {
      <span class="variable">event</span> = <span class="variable">document</span>.<span class="variable">createEventObject</span>();
      <span class="variable">fix</span>(<span class="variable">event</span>, <span class="variable">element</span>);

      <span class="comment">// This isn't quite ready</span>
      <span class="keyword">if</span> (<span class="variable">type</span>.<span class="variable">match</span>(<span class="regexp">/:/</span>)) {
        <span class="variable">event</span>.<span class="variable">eventName</span> = <span class="variable">type</span>;
        <span class="variable">event</span>.<span class="variable">eventType</span> = <span class="string">'ondataavailable'</span>;
        <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">fireEvent</span>(<span class="variable">event</span>.<span class="variable">eventType</span>, <span class="variable">event</span>)
      } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="variable">element</span>.<span class="variable">fireEvent</span>(<span class="class">IEType</span>(<span class="variable">type</span>), <span class="variable">event</span>)
      }
    } <span class="keyword">else</span> {
      <span class="variable">event</span> = <span class="variable">document</span>.<span class="variable">createEvent</span>(<span class="string">'HTMLEvents'</span>);
      <span class="variable">fix</span>(<span class="variable">event</span>, <span class="variable">element</span>);
      <span class="variable">event</span>.<span class="variable">eventName</span> = <span class="variable">type</span>;
      <span class="variable">event</span>.<span class="variable">initEvent</span>(<span class="variable">type</span>, <span class="variable">true</span>, <span class="variable">true</span>);
      <span class="keyword">return</span> !<span class="variable">element</span>.<span class="variable">dispatchEvent</span>(<span class="variable">event</span>);
    }
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Add a 'DOM ready' callback.</p>

<pre><code> turing.events.ready(function() {
   // The DOM is ready
 });</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Function</em>  callback A callback to run</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">events</span>.<span class="variable">ready</span> = <span class="keyword">function</span>(<span class="variable">callback</span>) {
    <span class="variable">bindOnReady</span>();
    <span class="variable">readyCallbacks</span>.<span class="variable">push</span>(<span class="variable">callback</span>);
  };

  <span class="keyword">if</span> (<span class="variable">turing</span>.<span class="variable">dom</span> !== <span class="string">'undefined'</span>) {
    <span class="variable">events</span>.<span class="variable">delegate</span> = <span class="keyword">function</span>(<span class="variable">element</span>, <span class="variable">selector</span>, <span class="variable">type</span>, <span class="variable">handler</span>) {
      <span class="keyword">return</span> <span class="variable">events</span>.<span class="variable">add</span>(<span class="variable">element</span>, <span class="variable">type</span>, <span class="keyword">function</span>(<span class="variable">event</span>) {
        <span class="keyword">var</span> <span class="variable">matches</span> = <span class="variable">turing</span>.<span class="variable">dom</span>.<span class="variable">findElement</span>(<span class="variable">event</span>.<span class="variable">target</span>, <span class="variable">selector</span>, <span class="variable">event</span>.<span class="variable">currentTarget</span>);
        <span class="keyword">if</span> (<span class="variable">matches</span>) {
          <span class="variable">handler</span>(<span class="variable">event</span>);
        }
      });
    };
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Events can be chained with DOM calls:</p>

<pre><code>  turing('p').bind('click', function(e) {
    alert('ouch');
  });</code></pre>

<p>The event will be bound to each matching element.</p>

<pre><code></code></pre>
</td>
<td class="code">
<pre><code><span class="variable">events</span>.<span class="variable">addDOMethods</span> = <span class="keyword">function</span>() {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">turing</span>.<span class="variable">domChain</span> === <span class="string">'undefined'</span>) <span class="keyword">return</span>;

    <span class="variable">turing</span>.<span class="variable">domChain</span>.<span class="variable">bind</span> = <span class="keyword">function</span>(<span class="variable">type</span>, <span class="variable">handler</span>) {
      <span class="keyword">var</span> <span class="variable">element</span>;
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="this">this</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="variable">element</span> = <span class="this">this</span>[<span class="variable">i</span>];
        <span class="keyword">if</span> (<span class="variable">handler</span>) {
          <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">add</span>(<span class="variable">element</span>, <span class="variable">type</span>, <span class="variable">handler</span>);
        } <span class="keyword">else</span> {
          <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">fire</span>(<span class="variable">element</span>, <span class="variable">type</span>);
        }
      }
      <span class="keyword">return</span> <span class="this">this</span>;
    };

    <span class="keyword">var</span> <span class="variable">chainedAliases</span> = (<span class="string">'click dblclick mouseover mouseout mousemove '</span> +
                          <span class="string">'mousedowe mouseup blur focus change keydown '</span> +
                          <span class="string">'keypress keyup resize scroll'</span>).<span class="variable">split</span>(<span class="string">' '</span>);

    <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">chainedAliases</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
      (<span class="keyword">function</span>(<span class="variable">name</span>) {
        <span class="variable">turing</span>.<span class="variable">domChain</span>[<span class="variable">name</span>] = <span class="keyword">function</span>(<span class="variable">handler</span>) {
          <span class="keyword">return</span> <span class="this">this</span>.<span class="variable">bind</span>(<span class="variable">name</span>, <span class="variable">handler</span>);
        };
      })(<span class="variable">chainedAliases</span>[<span class="variable">i</span>]);
    }
  };

  <span class="variable">events</span>.<span class="variable">addDOMethods</span>();</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>DOM ready event handlers can also be set with:</p>

<pre><code> turing.ready(function() { });</code></pre>

<p>Or just by passing a function to <code>turing()</code>:</p>

<pre><code> turing(function() {} );

</code></pre>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">ready</span> = <span class="variable">events</span>.<span class="variable">ready</span>;
  <span class="variable">turing</span>.<span class="variable">events</span> = <span class="variable">events</span>;

  <span class="variable">turing</span>.<span class="variable">init</span>(<span class="keyword">function</span>(<span class="variable">arg</span>) {
    <span class="keyword">if</span> (<span class="variable">arguments</span>.<span class="variable">length</span> === <span class="number integer">1</span>
        &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="keyword">typeof</span> <span class="variable">arguments</span>[<span class="number integer">0</span>] === <span class="string">'function'</span>) {
      <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">ready</span>(<span class="variable">arguments</span>[<span class="number integer">0</span>]);
    }
  });

  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">window</span> !== <span class="string">'undefined'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">window</span>.<span class="variable">attachEvent</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; !<span class="variable">window</span>.<span class="variable">addEventListener</span>) {
    <span class="variable">window</span>.<span class="variable">attachEvent</span>(<span class="string">'onunload'</span>, <span class="keyword">function</span>() {
      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">cache</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
        <span class="keyword">try</span> {
          <span class="variable">events</span>.<span class="variable">remove</span>(<span class="variable">cache</span>[<span class="variable">i</span>].<span class="variable">element</span>, <span class="variable">cache</span>[<span class="variable">i</span>].<span class="variable">type</span>);
          <span class="variable">cache</span>[<span class="variable">i</span>] = <span class="keyword">null</span>;
        } <span class="keyword">catch</span>(<span class="variable">e</span>) {}
      }
    });
  }
})();

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.functional.js"><a href="#">turing.functional</a></h2></td><td>turing.functional.js</td></tr><tr class="code">
<td class="docs">
<p>Turing Functional helpers.
 </p>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">functional</span> = {
  <span class="variable">curry</span>: <span class="variable">turing</span>.<span class="variable">bind</span>,

  <span class="variable">memoize</span>: <span class="keyword">function</span>(<span class="variable">memo</span>, <span class="variable">fn</span>) {
    <span class="keyword">var</span> <span class="variable">wrapper</span> = <span class="keyword">function</span>(<span class="variable">n</span>) {
      <span class="keyword">var</span> <span class="variable">result</span> = <span class="variable">memo</span>[<span class="variable">n</span>];
      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">result</span> !== <span class="string">'number'</span>) {
        <span class="variable">result</span> = <span class="variable">fn</span>(<span class="variable">wrapper</span>, <span class="variable">n</span>);
        <span class="variable">memo</span>[<span class="variable">n</span>] = <span class="variable">result</span>;
      }
      <span class="keyword">return</span> <span class="variable">result</span>;
    };
    <span class="keyword">return</span> <span class="variable">wrapper</span>;
  } 
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.net.js"><a href="#">turing.net</a></h2></td><td>turing.net.js</td></tr><tr class="code">
<td class="docs">
<p>The Turing Net module (Ajax).
 </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>() {
  <span class="keyword">var</span> <span class="variable">net</span> = {};</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Ajax request options:</p>

<ul><li><code>method</code>: {String} HTTP method - GET, POST, etc.</li><li><code>success</code>: {Function} A callback to run when a request is successful</li><li><code>error</code>: {Function} A callback to run when the request fails</li><li><code>asynchronous</code>: {Boolean} Defaults to asynchronous</li><li><code>postBody</code>: {String} The HTTP POST body</li><li><p><code>contentType</code>: {String} The content type of the request, default is <code>application/x-www-form-urlencoded</code></p><p></p></li></ul>
</td>
<td class="code">
<pre><code><span class="keyword">function</span> <span class="variable">xhr</span>() {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="class">XMLHttpRequest</span> !== <span class="string">'undefined'</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; (<span class="variable">window</span>.<span class="variable">location</span>.<span class="variable">protocol</span> !== <span class="string">'file:'</span> || !<span class="variable">window</span>.<span class="class">ActiveXObject</span>)) {
      <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">XMLHttpRequest</span>();
    } <span class="keyword">else</span> {
      <span class="keyword">try</span> {
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">ActiveXObject</span>(<span class="string">'Msxml2.XMLHTTP.6.0'</span>);
      } <span class="keyword">catch</span>(<span class="variable">e</span>) { }
      <span class="keyword">try</span> {
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">ActiveXObject</span>(<span class="string">'Msxml2.XMLHTTP.3.0'</span>);
      } <span class="keyword">catch</span>(<span class="variable">e</span>) { }
      <span class="keyword">try</span> {
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="class">ActiveXObject</span>(<span class="string">'Msxml2.XMLHTTP'</span>);
      } <span class="keyword">catch</span>(<span class="variable">e</span>) { }
    }
    <span class="keyword">return</span> <span class="variable">false</span>;
  }

  <span class="keyword">function</span> <span class="variable">successfulRequest</span>(<span class="variable">request</span>) {
    <span class="keyword">return</span> (<span class="variable">request</span>.<span class="variable">status</span> &<span class="variable">gt</span>;= <span class="number integer">200</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">request</span>.<span class="variable">status</span> &<span class="variable">lt</span>; <span class="number integer">300</span>) ||
        <span class="variable">request</span>.<span class="variable">status</span> == <span class="number integer">304</span> ||
        (<span class="variable">request</span>.<span class="variable">status</span> == <span class="number integer">0</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">request</span>.<span class="variable">responseText</span>);
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Serialize JavaScript for HTTP requests.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>Object</em>  object An Array or Object</p></li><li><p><strong>returns</strong>: <em>String</em>  A string suitable for a GET or POST request</p><p></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">net</span>.<span class="variable">serialize</span> = <span class="keyword">function</span>(<span class="variable">object</span>) {
    <span class="keyword">if</span> (!<span class="variable">object</span>) <span class="keyword">return</span>;

		<span class="keyword">var</span> <span class="variable">results</span> = [];
    <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">key</span> <span class="keyword">in</span> <span class="variable">object</span>) {
      <span class="variable">results</span>.<span class="variable">push</span>(<span class="variable">encodeURIComponent</span>(<span class="variable">key</span>) + <span class="string">'='</span> + <span class="variable">encodeURIComponent</span>(<span class="variable">object</span>[<span class="variable">key</span>]));
    }
		<span class="keyword">return</span> <span class="variable">results</span>.<span class="variable">join</span>(<span class="string">'&amp;'</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>JSON.parse support can be inferred using <code>turing.detect('JSON.parse')</code>.
    </p>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">addDetectionTest</span>(<span class="string">'JSON.parse'</span>, <span class="keyword">function</span>() {
    <span class="keyword">return</span> <span class="variable">window</span>.<span class="class">JSON</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">window</span>.<span class="class">JSON</span>.<span class="variable">parse</span>;
  });</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Parses JSON represented as a string.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  string The original string</p></li><li><p><strong>returns</strong>: <em>Object</em>  A JavaScript object</p><p></p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">net</span>.<span class="variable">parseJSON</span> = <span class="keyword">function</span>(<span class="variable">string</span>) {
		<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">string</span> !== <span class="string">'string'</span> || !<span class="variable">string</span>) <span class="keyword">return</span> <span class="keyword">null</span>;
		<span class="variable">string</span> = <span class="variable">string</span>.<span class="variable">trim</span>();
    <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">detect</span>(<span class="string">'JSON.parse'</span>) ?
      <span class="variable">window</span>.<span class="class">JSON</span>.<span class="variable">parse</span>(<span class="variable">string</span>) :
      (<span class="keyword">new</span> <span class="class">Function</span>(<span class="string">'return '</span> + <span class="variable">string</span>))();
  };

  <span class="keyword">function</span> <span class="variable">ajax</span>(<span class="variable">url</span>, <span class="variable">options</span>) {
    <span class="keyword">var</span> <span class="variable">request</span> = <span class="variable">xhr</span>();

    <span class="keyword">function</span> <span class="variable">respondToReadyState</span>(<span class="variable">readyState</span>) {
      <span class="keyword">if</span> (<span class="variable">request</span>.<span class="variable">readyState</span> == <span class="number integer">4</span>) {
        <span class="keyword">if</span> (<span class="variable">request</span>.<span class="variable">getResponseHeader</span>(<span class="string">'content-type'</span>) === <span class="string">'application/json'</span>)
          <span class="variable">request</span>.<span class="variable">responseJSON</span> = <span class="variable">net</span>.<span class="variable">parseJSON</span>(<span class="variable">request</span>.<span class="variable">responseText</span>);

        <span class="keyword">if</span> (<span class="variable">successfulRequest</span>(<span class="variable">request</span>)) {
          <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">success</span>) <span class="variable">options</span>.<span class="variable">success</span>(<span class="variable">request</span>);
        } <span class="keyword">else</span> {
          <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">error</span>) <span class="variable">options</span>.<span class="variable">error</span>(<span class="variable">request</span>);
        }
      }
    }

    <span class="comment">// Set the HTTP headers</span>
    <span class="keyword">function</span> <span class="variable">setHeaders</span>() {
      <span class="keyword">var</span> <span class="variable">defaults</span> = {
        <span class="string">'Accept'</span>: '<span class="regexp">/javascript, application/json</span>, <span class="regexp">/html, application/xml</span>, <span class="variable">text</span>/<span class="variable">xml</span>, *</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>',
        'Content-Type': 'application/x-www-form-urlencoded'
      };</p>

<pre><code>  /**</code></pre>

<p>Merge headers with defaults. 
       </p>
</td>
<td class="code">
<pre><code><span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">name</span> <span class="keyword">in</span> <span class="variable">defaults</span>) {
        <span class="keyword">if</span> (!<span class="variable">options</span>.<span class="variable">headers</span>.<span class="variable">hasOwnProperty</span>(<span class="variable">name</span>))
          <span class="variable">options</span>.<span class="variable">headers</span>[<span class="variable">name</span>] = <span class="variable">defaults</span>[<span class="variable">name</span>];
      }

      <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">name</span> <span class="keyword">in</span> <span class="variable">options</span>.<span class="variable">headers</span>) {
        <span class="variable">request</span>.<span class="variable">setRequestHeader</span>(<span class="variable">name</span>, <span class="variable">options</span>.<span class="variable">headers</span>[<span class="variable">name</span>]);
      }
    }

    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">options</span> === <span class="string">'undefined'</span>) <span class="variable">options</span> = {};

    <span class="variable">options</span>.<span class="variable">method</span> = <span class="variable">options</span>.<span class="variable">method</span> ? <span class="variable">options</span>.<span class="variable">method</span>.<span class="variable">toLowerCase</span>() : <span class="string">'get'</span>;
    <span class="variable">options</span>.<span class="variable">asynchronous</span> = <span class="variable">options</span>.<span class="variable">asynchronous</span> || <span class="variable">true</span>;
    <span class="variable">options</span>.<span class="variable">postBody</span> = <span class="variable">options</span>.<span class="variable">postBody</span> || <span class="string">''</span>;
    <span class="variable">request</span>.<span class="variable">onreadystatechange</span> = <span class="variable">respondToReadyState</span>;
    <span class="variable">request</span>.<span class="variable">open</span>(<span class="variable">options</span>.<span class="variable">method</span>, <span class="variable">url</span>, <span class="variable">options</span>.<span class="variable">asynchronous</span>);

    <span class="variable">options</span>.<span class="variable">headers</span> = <span class="variable">options</span>.<span class="variable">headers</span> || {};
    <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">contentType</span>) {
      <span class="variable">options</span>.<span class="variable">headers</span>[<span class="string">'Content-Type'</span>] = <span class="variable">options</span>.<span class="variable">contentType</span>;
    }

    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">options</span>.<span class="variable">postBody</span> !== <span class="string">'string'</span>) {
      <span class="comment">// Serialize JavaScript</span>
      <span class="variable">options</span>.<span class="variable">postBody</span> = <span class="variable">net</span>.<span class="variable">serialize</span>(<span class="variable">options</span>.<span class="variable">postBody</span>);
    }

    <span class="variable">setHeaders</span>();

    <span class="keyword">try</span> {
      <span class="variable">request</span>.<span class="variable">send</span>(<span class="variable">options</span>.<span class="variable">postBody</span>);
    } <span class="keyword">catch</span> (<span class="variable">e</span>) {
      <span class="keyword">if</span> (<span class="variable">options</span>.<span class="variable">error</span>) {
        <span class="variable">options</span>.<span class="variable">error</span>();
      }
    }

    <span class="keyword">return</span> <span class="variable">request</span>;
  }

  <span class="keyword">function</span> <span class="class">JSONPCallback</span>(<span class="variable">url</span>, <span class="variable">success</span>, <span class="variable">failure</span>) {
    <span class="keyword">var</span> <span class="variable">self</span> = <span class="this">this</span>;
    <span class="this">this</span>.<span class="variable">url</span> = <span class="variable">url</span>;
    <span class="this">this</span>.<span class="variable">methodName</span> = <span class="string">'__turing_jsonp_'</span> + <span class="variable">parseInt</span>(<span class="keyword">new</span> <span class="class">Date</span>().<span class="variable">getTime</span>());
    <span class="this">this</span>.<span class="variable">success</span> = <span class="variable">success</span>;
    <span class="this">this</span>.<span class="variable">failure</span> = <span class="variable">failure</span>;

    <span class="keyword">function</span> <span class="variable">runCallback</span>(<span class="variable">json</span>) {
      <span class="variable">self</span>.<span class="variable">success</span>(<span class="variable">json</span>);
      <span class="variable">self</span>.<span class="variable">teardown</span>();
    }

    <span class="variable">window</span>[<span class="this">this</span>.<span class="variable">methodName</span>] = <span class="variable">runCallback</span>;
  }

  <span class="class">JSONPCallback</span>.<span class="variable">prototype</span>.<span class="variable">run</span> = <span class="keyword">function</span>() {
    <span class="this">this</span>.<span class="variable">scriptTag</span> = <span class="variable">document</span>.<span class="variable">createElement</span>(<span class="string">'script'</span>);
    <span class="this">this</span>.<span class="variable">scriptTag</span>.<span class="variable">id</span> = <span class="this">this</span>.<span class="variable">methodName</span>;
    <span class="this">this</span>.<span class="variable">scriptTag</span>.<span class="variable">src</span> = <span class="this">this</span>.<span class="variable">url</span>.<span class="variable">replace</span>(<span class="string">'{callback}'</span>, <span class="this">this</span>.<span class="variable">methodName</span>);
    <span class="variable">document</span>.<span class="variable">body</span>.<span class="variable">appendChild</span>(<span class="this">this</span>.<span class="variable">scriptTag</span>);
  }

  <span class="class">JSONPCallback</span>.<span class="variable">prototype</span>.<span class="variable">teardown</span> = <span class="keyword">function</span>() {
    <span class="variable">window</span>[<span class="this">this</span>.<span class="variable">methodName</span>] = <span class="keyword">null</span>;
    <span class="keyword">delete</span> <span class="variable">window</span>[<span class="this">this</span>.<span class="variable">methodName</span>];
    <span class="keyword">if</span> (<span class="this">this</span>.<span class="variable">scriptTag</span>) {
      <span class="variable">document</span>.<span class="variable">body</span>.<span class="variable">removeChild</span>(<span class="this">this</span>.<span class="variable">scriptTag</span>);
    }
  }</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>An Ajax GET request.</p>

<pre><code>turing.net.get('/url', {
  success: function(request) {
  }
});</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  url The URL to request</p></li><li><p><strong>param</strong>: <em>Object</em>  options The Ajax request options</p></li><li><p><strong>returns</strong>: <em>Object</em>  The Ajax request object</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">net</span>.<span class="variable">get</span> = <span class="keyword">function</span>(<span class="variable">url</span>, <span class="variable">options</span>) {
    <span class="variable">options</span>.<span class="variable">method</span> = <span class="string">'get'</span>;
    <span class="keyword">return</span> <span class="variable">ajax</span>(<span class="variable">url</span>, <span class="variable">options</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>An Ajax POST request.</p>

<pre><code>turing.net.post('/url', {
  postBody: 'params',
  success: function(request) {
  }
});</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  url The URL to request</p></li><li><p><strong>param</strong>: <em>Object</em>  options The Ajax request options (<code>postBody</code> may come in handy here)</p></li><li><p><strong>returns</strong>: <em>Object</em>  The Ajax request object</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">net</span>.<span class="variable">post</span> = <span class="keyword">function</span>(<span class="variable">url</span>, <span class="variable">options</span>) {
    <span class="variable">options</span>.<span class="variable">method</span> = <span class="string">'post'</span>;
    <span class="keyword">return</span> <span class="variable">ajax</span>(<span class="variable">url</span>, <span class="variable">options</span>);
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>A jsonp request.  Example:</p>

<pre><code>var url = 'http://feeds.delicious.com/v1/json/';
url += 'alex_young/javascript?callback={callback}';

turing.net.jsonp(url, {
  success: function(json) {
    console.log(json);
  }
});</code></pre>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  url The URL to request</p></li><li><p><strong>param</strong>: <em>Object</em>  options The Ajax request options</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">net</span>.<span class="variable">jsonp</span> = <span class="keyword">function</span>(<span class="variable">url</span>, <span class="variable">options</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">options</span> === <span class="string">'undefined'</span>) <span class="variable">options</span> = {};
    <span class="keyword">var</span> <span class="variable">callback</span> = <span class="keyword">new</span> <span class="class">JSONPCallback</span>(<span class="variable">url</span>, <span class="variable">options</span>.<span class="variable">success</span>, <span class="variable">options</span>.<span class="variable">failure</span>);
    <span class="variable">callback</span>.<span class="variable">run</span>();
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>The Ajax methods are mapped to the <code>turing</code> object:</p>

<pre><code> turing.get();
 turing.post();
 turing.json();

</code></pre>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="variable">get</span> = <span class="variable">net</span>.<span class="variable">get</span>;
  <span class="variable">turing</span>.<span class="variable">post</span> = <span class="variable">net</span>.<span class="variable">post</span>;
  <span class="variable">turing</span>.<span class="variable">jsonp</span> = <span class="variable">net</span>.<span class="variable">jsonp</span>;

  <span class="variable">net</span>.<span class="variable">ajax</span> = <span class="variable">ajax</span>;
  <span class="variable">turing</span>.<span class="variable">net</span> = <span class="variable">net</span>;
})();

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.plugins.js"><a href="#">turing.plugins</a></h2></td><td>turing.plugins.js</td></tr><tr class="code">
<td class="docs">
<p>The Turing plugin module.</p>

<p>This is an example plugin:</p>

<pre><code>turing.plugins.register('turnRed', {
  name: 'Turn Things Red',
  version: '1.0.0',
  description: 'Turns the background red',
  author: 'Alex Young &lt;alex@example.com&gt;',
  licenses: [ { type: 'MIT' } ],

  turnRed: function() {
    this[0].style.backgroundColor = '#ff0000';
    return this;
  }
});</code></pre>

<p> </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>() {
  <span class="keyword">var</span> <span class="variable">plugins</span> = {};
  <span class="variable">plugins</span>.<span class="variable">registered</span> = {};
  <span class="variable">plugins</span>.<span class="class">AlreadyRegistered</span> = <span class="class">Error</span>;
  <span class="variable">plugins</span>.<span class="class">NotFound</span> = <span class="class">Error</span>;</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Registers a plugin, making it available for
chained DOM calls.</p>

<p>Throws turing.plugins.AlreadyRegistered if a
plugin with the same name has been registered.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  methodName The name of your plugin method </p></li><li><p><strong>param</strong>: <em>Object</em>  metadata Your plugin</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">plugins</span>.<span class="variable">register</span> = <span class="keyword">function</span>(<span class="variable">methodName</span>, <span class="variable">metadata</span>) {
    <span class="keyword">if</span> (<span class="variable">plugins</span>.<span class="variable">registered</span>[<span class="variable">methodName</span>]) {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="variable">plugins</span>.<span class="class">AlreadyRegistered</span>(<span class="string">'Already registered a plugin called: '</span> + <span class="variable">methodName</span>);
    }

    <span class="variable">plugins</span>.<span class="variable">registered</span>[<span class="variable">methodName</span>] = <span class="variable">metadata</span>;
    <span class="variable">turing</span>.<span class="variable">domChain</span>[<span class="variable">methodName</span>] = <span class="variable">metadata</span>[<span class="variable">methodName</span>];
  };</code></pre>
</td>
</tr>
<tr class="code">
<td class="docs">
<p>Removes a plugin.  Throws turing.plugins.NotFound if
the plugin could not be found.</p>

<h2></h2>

<ul><li><p><strong>param</strong>: <em>String</em>  methodName The name of the plugin</p></li></ul>
</td>
<td class="code">
<pre><code><span class="variable">plugins</span>.<span class="variable">remove</span> = <span class="keyword">function</span>(<span class="variable">methodName</span>) {
    <span class="keyword">if</span> (!<span class="variable">plugins</span>.<span class="variable">registered</span>.<span class="variable">hasOwnProperty</span>(<span class="variable">methodName</span>)) {
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="variable">plugins</span>.<span class="class">NotFound</span>(<span class="string">'Plugin not found: '</span> + <span class="variable">methodName</span>);
    } <span class="keyword">else</span> {
      <span class="keyword">delete</span> <span class="variable">plugins</span>.<span class="variable">registered</span>[<span class="variable">methodName</span>]
      <span class="keyword">delete</span> <span class="variable">turing</span>.<span class="variable">domChain</span>[<span class="variable">methodName</span>];
    }
  };

  <span class="variable">turing</span>.<span class="variable">plugins</span> = <span class="variable">plugins</span>;
})();

</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.oo.js"><a href="#">turing.oo</a></h2></td><td>turing.oo.js</td></tr><tr class="code">
<td class="docs">
<h2>The Turing Class</h2>

<pre><code>User = turing.Class({
  initialize: function(name, age) {
    this.name = name;
    this.age  = age;
  }
});

new User('Alice', '26');</code></pre>

<h2>Inheritance</h2>

<p>Pass an object to <code>turing.Class</code> to inherit from it.</p>

<pre><code>SuperUser = turing.Class(User, {
  initialize: function() {
    this.$super('initialize', arguments);
  },

  toString: function() {
    return "SuperUser: " + this.$super('toString');
  }
});</code></pre>

<h2>Mixins</h2>

<p>Objects can be embedded within each other:</p>

<pre><code>MixinUser = turing.Class({
  include: User,

  initialize: function(log) {
    this.log = log;
  }
});</code></pre>
</td>
<td class="code">
<pre><code><span class="variable">turing</span>.<span class="class">Class</span> = <span class="keyword">function</span>() {
  <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">oo</span>.<span class="variable">create</span>.<span class="variable">apply</span>(<span class="this">this</span>, <span class="variable">arguments</span>);
}

<span class="variable">turing</span>.<span class="variable">oo</span> = {
  <span class="variable">create</span>: <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">methods</span> = <span class="keyword">null</span>,
        <span class="variable">parent</span>  = <span class="variable">undefined</span>,
        <span class="variable">klass</span>   = <span class="keyword">function</span>() {
          <span class="this">this</span>.$<span class="keyword">super</span> = <span class="keyword">function</span>(<span class="variable">method</span>, <span class="variable">args</span>) { <span class="keyword">return</span> <span class="variable">turing</span>.<span class="variable">oo</span>.$<span class="keyword">super</span>(<span class="this">this</span>.$<span class="variable">parent</span>, <span class="this">this</span>, <span class="variable">method</span>, <span class="variable">args</span>); };
          <span class="this">this</span>.<span class="variable">initialize</span>.<span class="variable">apply</span>(<span class="this">this</span>, <span class="variable">arguments</span>);
        };

    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">arguments</span>[<span class="number integer">0</span>] === <span class="string">'function'</span>) {
      <span class="variable">parent</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
      <span class="variable">methods</span> = <span class="variable">arguments</span>[<span class="number integer">1</span>];
    } <span class="keyword">else</span> {
      <span class="variable">methods</span> = <span class="variable">arguments</span>[<span class="number integer">0</span>];
    }

    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">parent</span> !== <span class="string">'undefined'</span>) {
      <span class="variable">turing</span>.<span class="variable">oo</span>.<span class="variable">extend</span>(<span class="variable">klass</span>.<span class="variable">prototype</span>, <span class="variable">parent</span>.<span class="variable">prototype</span>);
      <span class="variable">klass</span>.<span class="variable">prototype</span>.$<span class="variable">parent</span> = <span class="variable">parent</span>.<span class="variable">prototype</span>;
    }

    <span class="variable">turing</span>.<span class="variable">oo</span>.<span class="variable">mixin</span>(<span class="variable">klass</span>, <span class="variable">methods</span>);
    <span class="variable">turing</span>.<span class="variable">oo</span>.<span class="variable">extend</span>(<span class="variable">klass</span>.<span class="variable">prototype</span>, <span class="variable">methods</span>);
    <span class="variable">klass</span>.<span class="variable">prototype</span>.<span class="variable">constructor</span> = <span class="variable">klass</span>;

    <span class="keyword">if</span> (!<span class="variable">klass</span>.<span class="variable">prototype</span>.<span class="variable">initialize</span>)
      <span class="variable">klass</span>.<span class="variable">prototype</span>.<span class="variable">initialize</span> = <span class="keyword">function</span>(){};

    <span class="keyword">return</span> <span class="variable">klass</span>;
  },

  <span class="variable">mixin</span>: <span class="keyword">function</span>(<span class="variable">klass</span>, <span class="variable">methods</span>) {
    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">methods</span>.<span class="variable">include</span> !== <span class="string">'undefined'</span>) {
      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable">methods</span>.<span class="variable">include</span> === <span class="string">'function'</span>) {
        <span class="variable">turing</span>.<span class="variable">oo</span>.<span class="variable">extend</span>(<span class="variable">klass</span>.<span class="variable">prototype</span>, <span class="variable">methods</span>.<span class="variable">include</span>.<span class="variable">prototype</span>);
      } <span class="keyword">else</span> {
        <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">i</span> = <span class="number integer">0</span>; <span class="variable">i</span> &<span class="variable">lt</span>; <span class="variable">methods</span>.<span class="variable">include</span>.<span class="variable">length</span>; <span class="variable">i</span>++) {
          <span class="variable">turing</span>.<span class="variable">oo</span>.<span class="variable">extend</span>(<span class="variable">klass</span>.<span class="variable">prototype</span>, <span class="variable">methods</span>.<span class="variable">include</span>[<span class="variable">i</span>].<span class="variable">prototype</span>);
        }
      }
    }
  },

  <span class="variable">extend</span>: <span class="keyword">function</span>(<span class="variable">destination</span>, <span class="variable">source</span>) {
    <span class="keyword">for</span> (<span class="keyword">var</span> <span class="variable">property</span> <span class="keyword">in</span> <span class="variable">source</span>)
      <span class="variable">destination</span>[<span class="variable">property</span>] = <span class="variable">source</span>[<span class="variable">property</span>];
    <span class="keyword">return</span> <span class="variable">destination</span>;
  },
  $<span class="keyword">super</span>: <span class="keyword">function</span>(<span class="variable">parentClass</span>, <span class="variable">instance</span>, <span class="variable">method</span>, <span class="variable">args</span>) {
    <span class="keyword">return</span> <span class="variable">parentClass</span>[<span class="variable">method</span>].<span class="variable">apply</span>(<span class="variable">instance</span>, <span class="variable">args</span>);
  }
};
</code></pre>
</td>
</tr><tr class="filename"><td><h2 id="turing.touch.js"><a href="#">turing.touch</a></h2></td><td>turing.touch.js</td></tr><tr class="code">
<td class="docs">
<p>Support for touchscreen devices.  Run <code>turing.touch.register()</code> to get touch event support.</p>

<h2>Tap</h2>

<pre><code>turing.events.add(element, 'tap', function(e) {
  alert('tap');
});</code></pre>

<h2>Swipe</h2>

<pre><code>turing.events.add(element, 'swipe', function(e) {
  alert('swipe');
});</code></pre>

<h2>Orientation Changes</h2>

<p>Device orientation is available in <code>turing.touch.orientation()</code>.</p>

<pre><code>turing.events.add(element, 'orientationchange', function(e) {
  alert('Orientation is now: ' + turing.touch.orientation());
});</code></pre>

<p> </p>
</td>
<td class="code">
<pre><code>(<span class="keyword">function</span>() {
  <span class="keyword">var</span> <span class="variable">touch</span> = {}, <span class="variable">state</span> = {};

  <span class="variable">touch</span>.<span class="variable">swipeThreshold</span> = <span class="number integer">50</span>;

  <span class="comment">// Returns [orientation angle, orientation string]</span>
  <span class="variable">touch</span>.<span class="variable">orientation</span> = <span class="keyword">function</span>() {
    <span class="keyword">var</span> <span class="variable">orientation</span> = <span class="variable">window</span>.<span class="variable">orientation</span>,
        <span class="variable">orientationString</span> = <span class="string">''</span>;
    <span class="keyword">switch</span> (<span class="variable">orientation</span>) {
      <span class="keyword">case</span> <span class="number integer">0</span>:
        <span class="variable">orientationString</span> += <span class="string">'portrait'</span>;
      <span class="keyword">break</span>;

      <span class="keyword">case</span> -<span class="number integer">90</span>:
        <span class="variable">orientationString</span> += <span class="string">'landscape right'</span>;
      <span class="keyword">break</span>;

      <span class="keyword">case</span> <span class="number integer">90</span>:
        <span class="variable">orientationString</span> += <span class="string">'landscape left'</span>;
      <span class="keyword">break</span>;

      <span class="keyword">case</span> <span class="number integer">180</span>:
        <span class="variable">orientationString</span> += <span class="string">'portrait upside-down'</span>;
      <span class="keyword">break</span>;
    }
    <span class="keyword">return</span> [<span class="variable">orientation</span>, <span class="variable">orientationString</span>];
  };

  <span class="keyword">function</span> <span class="variable">touchStart</span>(<span class="variable">e</span>) {
    <span class="variable">state</span>.<span class="variable">touches</span> = <span class="variable">e</span>.<span class="variable">touches</span>;
    <span class="variable">state</span>.<span class="variable">startTime</span>  = (<span class="keyword">new</span> <span class="class">Date</span>).<span class="variable">getTime</span>();
    <span class="variable">state</span>.<span class="variable">x</span> = <span class="variable">e</span>.<span class="variable">changedTouches</span>[<span class="number integer">0</span>].<span class="variable">clientX</span>;
    <span class="variable">state</span>.<span class="variable">y</span> = <span class="variable">e</span>.<span class="variable">changedTouches</span>[<span class="number integer">0</span>].<span class="variable">clientY</span>;
    <span class="variable">state</span>.<span class="variable">startX</span> = <span class="variable">state</span>.<span class="variable">x</span>;
    <span class="variable">state</span>.<span class="variable">startY</span> = <span class="variable">state</span>.<span class="variable">y</span>;
    <span class="variable">state</span>.<span class="variable">target</span> = <span class="variable">e</span>.<span class="variable">target</span>;
    <span class="variable">state</span>.<span class="variable">duration</span> = <span class="number integer">0</span>;
  }

  <span class="keyword">function</span> <span class="variable">touchEnd</span>(<span class="variable">e</span>) {
    <span class="keyword">var</span> <span class="variable">x</span> = <span class="variable">e</span>.<span class="variable">changedTouches</span>[<span class="number integer">0</span>].<span class="variable">clientX</span>,
        <span class="variable">y</span> = <span class="variable">e</span>.<span class="variable">changedTouches</span>[<span class="number integer">0</span>].<span class="variable">clientY</span>;

    <span class="keyword">if</span> (<span class="variable">state</span>.<span class="variable">x</span> === <span class="variable">x</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">state</span>.<span class="variable">y</span> === <span class="variable">y</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">state</span>.<span class="variable">touches</span>.<span class="variable">length</span> == <span class="number integer">1</span>) {
      <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">fire</span>(<span class="variable">e</span>.<span class="variable">target</span>, <span class="string">'tap'</span>);
    }
  }

  <span class="keyword">function</span> <span class="variable">touchMove</span>(<span class="variable">e</span>) {
    <span class="keyword">var</span> <span class="variable">moved</span> = <span class="number integer">0</span>, <span class="variable">touch</span> = <span class="variable">e</span>.<span class="variable">changedTouches</span>[<span class="number integer">0</span>];
    <span class="variable">state</span>.<span class="variable">duration</span> = (<span class="keyword">new</span> <span class="class">Date</span>).<span class="variable">getTime</span>() - <span class="variable">state</span>.<span class="variable">startTime</span>;
    <span class="variable">state</span>.<span class="variable">x</span> = <span class="variable">state</span>.<span class="variable">startX</span> - <span class="variable">touch</span>.<span class="variable">pageX</span>;
    <span class="variable">state</span>.<span class="variable">y</span> = <span class="variable">state</span>.<span class="variable">startY</span> - <span class="variable">touch</span>.<span class="variable">pageY</span>;
    <span class="variable">moved</span> = <span class="class">Math</span>.<span class="variable">sqrt</span>(<span class="class">Math</span>.<span class="variable">pow</span>(<span class="class">Math</span>.<span class="variable">abs</span>(<span class="variable">state</span>.<span class="variable">x</span>), <span class="number integer">2</span>) + <span class="class">Math</span>.<span class="variable">pow</span>(<span class="class">Math</span>.<span class="variable">abs</span>(<span class="variable">state</span>.<span class="variable">y</span>), <span class="number integer">2</span>));

    <span class="keyword">if</span> (<span class="variable">state</span>.<span class="variable">duration</span> &<span class="variable">lt</span>; <span class="number integer">1000</span> &<span class="variable">amp</span>;&<span class="variable">amp</span>; <span class="variable">moved</span> &<span class="variable">gt</span>; <span class="variable">turing</span>.<span class="variable">touch</span>.<span class="variable">swipeThreshold</span>) {
      <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">fire</span>(<span class="variable">e</span>.<span class="variable">target</span>, <span class="string">'swipe'</span>);
    }
  }

  <span class="comment">// register must be called to register for touch event helpers</span>
  <span class="variable">touch</span>.<span class="variable">register</span> = <span class="keyword">function</span>() {
    <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">add</span>(<span class="variable">document</span>, <span class="string">'touchstart'</span>, <span class="variable">touchStart</span>);
    <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">add</span>(<span class="variable">document</span>, <span class="string">'touchmove'</span>, <span class="variable">touchMove</span>);
    <span class="variable">turing</span>.<span class="variable">events</span>.<span class="variable">add</span>(<span class="variable">document</span>, <span class="string">'touchend'</span>, <span class="variable">touchEnd</span>);
    <span class="variable">turing</span>.<span class="variable">touch</span>.<span class="variable">swipeThreshold</span> = <span class="variable">screen</span>.<span class="variable">width</span> / <span class="number integer">5</span>;
  };

  <span class="variable">turing</span>.<span class="variable">touch</span> = <span class="variable">touch</span>;
})();

</code></pre>
</td>
</tr>	</body>
</html></tbody></table>